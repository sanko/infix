<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>infix FFI Library: src/core/arena.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">infix FFI Library<span id="projectnumber">&#160;0.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_aebb8dcc11953d78e620bbef0b9e2183.html">core</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">arena.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Implementation of the internal arena allocator.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;common/infix_internals.h&quot;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for arena.c:</div>
<div class="dyncontent">
<div class="center"><img src="arena_8c__incl.png" border="0" usemap="#asrc_2core_2arena_8c" alt=""/></div>
<map name="asrc_2core_2arena_8c" id="asrc_2core_2arena_8c">
<area shape="rect" title="Implementation of the internal arena allocator." alt="" coords="327,5,453,31"/>
<area shape="rect" href="infix__internals_8h_source.html" title=" " alt="" coords="130,79,317,104"/>
<area shape="poly" title=" " alt="" coords="364,33,264,76,262,71,362,28"/>
<area shape="rect" title=" " alt="" coords="319,225,389,251"/>
<area shape="poly" title=" " alt="" coords="391,31,382,79,360,212,355,212,377,78,385,30"/>
<area shape="rect" title=" " alt="" coords="392,79,463,104"/>
<area shape="poly" title=" " alt="" coords="399,30,417,65,413,68,394,32"/>
<area shape="rect" title=" " alt="" coords="487,79,557,104"/>
<area shape="poly" title=" " alt="" coords="412,28,490,70,487,74,410,33"/>
<area shape="rect" href="infix__config_8h.html" title="Internal&#45;only header for platform, architecture, and ABI detection." alt="" coords="5,152,175,177"/>
<area shape="poly" title=" " alt="" coords="203,106,125,148,123,143,201,102"/>
<area shape="rect" href="infix_8h.html" title="The main public header for the infix FFI library." alt="" coords="199,152,293,177"/>
<area shape="poly" title=" " alt="" coords="230,104,241,138,236,140,225,105"/>
<area shape="rect" title=" " alt="" coords="57,299,139,324"/>
<area shape="poly" title=" " alt="" coords="200,180,111,205,75,217,57,227,52,241,56,257,77,287,73,290,51,259,47,241,53,224,73,212,110,199,199,175"/>
<area shape="rect" title=" " alt="" coords="174,299,249,324"/>
<area shape="poly" title=" " alt="" coords="253,177,260,211,260,231,257,251,247,272,234,290,230,287,242,269,251,250,255,231,254,211,247,178"/>
<area shape="poly" title=" " alt="" coords="265,175,326,215,323,220,262,180"/>
<area shape="rect" href="compat__c23_8h.html" title="Provides compatibility shims for C23 features in a C17/C11 project." alt="" coords="68,225,243,251"/>
<area shape="poly" title=" " alt="" coords="233,179,183,219,179,214,230,175"/>
<area shape="poly" title=" " alt="" coords="148,253,118,290,114,286,144,249"/>
<area shape="poly" title=" " alt="" coords="167,249,196,286,192,289,162,253"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="arena_8c__dep__incl.png" border="0" usemap="#asrc_2core_2arena_8cdep" alt=""/></div>
<map name="asrc_2core_2arena_8cdep" id="asrc_2core_2arena_8cdep">
<area shape="rect" title="Implementation of the internal arena allocator." alt="" coords="61,5,186,31"/>
<area shape="rect" href="infix_8c.html" title="The unity build source file for the infix library." alt="" coords="5,79,89,104"/>
<area shape="poly" title=" " alt="" coords="103,42,62,80,58,76,99,38"/>
<area shape="rect" href="840__arena__allocator_8c.html" title="Unit tests for the internal arena allocator." alt="" coords="114,79,287,104"/>
<area shape="poly" title=" " alt="" coords="148,38,190,76,186,80,144,42"/>
</map>
</div>
</div>
<p><a href="arena_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gae39ca61ea3637aee7e87c1b41188c733" id="r_gae39ca61ea3637aee7e87c1b41188c733"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structinfix__arena__t.html">infix_arena_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__high__level__api.html#gae39ca61ea3637aee7e87c1b41188c733">infix_arena_create</a> (size_t initial_size)</td></tr>
<tr class="memdesc:gae39ca61ea3637aee7e87c1b41188c733"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates and initializes a new memory arena.  <br /></td></tr>
<tr class="separator:gae39ca61ea3637aee7e87c1b41188c733"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga50b7219c58789fc03898690254f0280e" id="r_ga50b7219c58789fc03898690254f0280e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__high__level__api.html#ga50b7219c58789fc03898690254f0280e">infix_arena_destroy</a> (<a class="el" href="structinfix__arena__t.html">infix_arena_t</a> *arena)</td></tr>
<tr class="memdesc:ga50b7219c58789fc03898690254f0280e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees an entire memory arena and all objects allocated within it.  <br /></td></tr>
<tr class="separator:ga50b7219c58789fc03898690254f0280e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabb32fed25010a3111812c8dfacd4cf40" id="r_gabb32fed25010a3111812c8dfacd4cf40"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__high__level__api.html#gabb32fed25010a3111812c8dfacd4cf40">infix_arena_alloc</a> (<a class="el" href="structinfix__arena__t.html">infix_arena_t</a> *arena, size_t size, size_t alignment)</td></tr>
<tr class="memdesc:gabb32fed25010a3111812c8dfacd4cf40"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocates a block of memory from the arena with a specific alignment.  <br /></td></tr>
<tr class="separator:gabb32fed25010a3111812c8dfacd4cf40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga624819bf3bc628f63575001ed9c6ffd5" id="r_ga624819bf3bc628f63575001ed9c6ffd5"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__high__level__api.html#ga624819bf3bc628f63575001ed9c6ffd5">infix_arena_calloc</a> (<a class="el" href="structinfix__arena__t.html">infix_arena_t</a> *arena, size_t num, size_t size, size_t alignment)</td></tr>
<tr class="memdesc:ga624819bf3bc628f63575001ed9c6ffd5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocates a zero-initialized block of memory from the arena.  <br /></td></tr>
<tr class="separator:ga624819bf3bc628f63575001ed9c6ffd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementation of the internal arena allocator. </p>
<p>Copyright (c) 2025 Sanko Robinson</p>
<p>This source code is dual-licensed under the Artistic License 2.0 or the MIT License. You may choose to use this code under the terms of either license.</p>
<p>SPDX-License-Identifier: (Artistic-2.0 OR MIT)</p>
<p>The documentation blocks within this file are licensed under the Creative Commons Attribution 4.0 International License (CC BY 4.0).</p>
<p>SPDX-License-Identifier: CC-BY-4.0</p>
<p>This file provides the concrete implementations for the arena allocator's functions. It contains the logic for creating the arena, performing fast, aligned "bump" allocations, and destroying the arena to free all its memory at once.</p>
<p>The implementation includes security-critical checks to prevent integer overflows when calculating allocation sizes and offsets, making it safe for use with potentially untrusted inputs from the fuzzing harnesses. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
