<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>infix: Named Type Registry</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript"> DoxygenAwesomeDarkModeToggle.init() </script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript"> DoxygenAwesomeFragmentCopyButton.init() </script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript"> DoxygenAwesomeParagraphLink.init() </script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript"> DoxygenAwesomeInteractiveToc.init() </script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">infix
   </div>
   <div id="projectbrief">A JIT-Powered FFI Library for C</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__registry__api.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Named Type Registry<div class="ingroups"><a class="el" href="group__high__level__api.html">High-Level Signature API</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>APIs for defining, storing, and reusing complex types by name.  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for Named Type Registry:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__registry__api.svg" width="403" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gabc173ceb38459e181fb2e9c724da9a92" id="r_gabc173ceb38459e181fb2e9c724da9a92"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__version__info.html#gaf6436c47724bc1059aa82f37329f7991">INFIX_API</a> <a class="el" href="group__version__info.html#ga9806a5783de91a5ddc7798bca59aaa10">INFIX_NODISCARD</a> <a class="el" href="structinfix__registry__t.html">infix_registry_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__registry__api.html#gabc173ceb38459e181fb2e9c724da9a92">infix_registry_create</a> (void)</td></tr>
<tr class="memdesc:gabc173ceb38459e181fb2e9c724da9a92"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new, empty named type registry.  <br /></td></tr>
<tr class="separator:gabc173ceb38459e181fb2e9c724da9a92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf72b9865f88d0e587b47cb5bd54e589b" id="r_gaf72b9865f88d0e587b47cb5bd54e589b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__version__info.html#gaf6436c47724bc1059aa82f37329f7991">INFIX_API</a> <a class="el" href="group__version__info.html#ga9806a5783de91a5ddc7798bca59aaa10">INFIX_NODISCARD</a> <a class="el" href="structinfix__registry__t.html">infix_registry_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__registry__api.html#gaf72b9865f88d0e587b47cb5bd54e589b">infix_registry_clone</a> (const <a class="el" href="structinfix__registry__t.html">infix_registry_t</a> *)</td></tr>
<tr class="memdesc:gaf72b9865f88d0e587b47cb5bd54e589b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a deep copy of an existing type registry.  <br /></td></tr>
<tr class="separator:gaf72b9865f88d0e587b47cb5bd54e589b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4945e0a2c35c5c435e1fa436db0d9e74" id="r_ga4945e0a2c35c5c435e1fa436db0d9e74"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__version__info.html#gaf6436c47724bc1059aa82f37329f7991">INFIX_API</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__registry__api.html#ga4945e0a2c35c5c435e1fa436db0d9e74">infix_registry_destroy</a> (<a class="el" href="structinfix__registry__t.html">infix_registry_t</a> *)</td></tr>
<tr class="memdesc:ga4945e0a2c35c5c435e1fa436db0d9e74"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroys a type registry and frees all associated memory.  <br /></td></tr>
<tr class="separator:ga4945e0a2c35c5c435e1fa436db0d9e74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9ffe6b87941bcb364cc386ae7b0877cd" id="r_ga9ffe6b87941bcb364cc386ae7b0877cd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__version__info.html#gaf6436c47724bc1059aa82f37329f7991">INFIX_API</a> <a class="el" href="group__version__info.html#ga9806a5783de91a5ddc7798bca59aaa10">INFIX_NODISCARD</a> <a class="el" href="group__high__level__api.html#ga8643667be6ea1ef9269c2e46d8f11ff7">infix_status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__registry__api.html#ga9ffe6b87941bcb364cc386ae7b0877cd">infix_register_types</a> (<a class="el" href="structinfix__registry__t.html">infix_registry_t</a> *, const char *)</td></tr>
<tr class="memdesc:ga9ffe6b87941bcb364cc386ae7b0877cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parses a string of type definitions and adds them to a registry.  <br /></td></tr>
<tr class="separator:ga9ffe6b87941bcb364cc386ae7b0877cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>APIs for defining, storing, and reusing complex types by name. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga9ffe6b87941bcb364cc386ae7b0877cd" name="ga9ffe6b87941bcb364cc386ae7b0877cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9ffe6b87941bcb364cc386ae7b0877cd">&#9670;&#160;</a></span>infix_register_types()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__version__info.html#gaf6436c47724bc1059aa82f37329f7991">INFIX_API</a> <a class="el" href="group__version__info.html#ga9806a5783de91a5ddc7798bca59aaa10">INFIX_NODISCARD</a> <a class="el" href="group__high__level__api.html#ga8643667be6ea1ef9269c2e46d8f11ff7">infix_status</a> infix_register_types </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinfix__registry__t.html">infix_registry_t</a> *&#160;</td>
          <td class="paramname"><em>registry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>definitions</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parses a string of type definitions and adds them to a registry. </p>
<p>This is the primary way to populate a registry. Definitions are separated by semicolons. The parser supports forward declarations (<code>@Name;</code>) and out-of-order definitions, making it easy to define mutually recursive types.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">registry</td><td>The registry to populate. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">definitions</td><td>A semicolon-separated string of definitions. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>INFIX_SUCCESS</code> on success, or an error code on failure. <div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span>* my_types =</div>
<div class="line">    <span class="stringliteral">&quot;@Point = { x: double, y: double };&quot;</span>    <span class="comment">// Define a struct</span></div>
<div class="line">    <span class="stringliteral">&quot;@Node;&quot;</span>                                <span class="comment">// Forward-declare Node</span></div>
<div class="line">    <span class="stringliteral">&quot;@List = { head: *@Node };&quot;</span>             <span class="comment">// Use the forward declaration</span></div>
<div class="line">    <span class="stringliteral">&quot;@Node = { value: int, next: *@Node };&quot;</span> <span class="comment">// Define the recursive struct</span></div>
<div class="line">;</div>
<div class="line"><a class="code hl_function" href="group__registry__api.html#ga9ffe6b87941bcb364cc386ae7b0877cd">infix_register_types</a>(<a class="code hl_variable" href="008__registry__introspection_8c.html#aa7e646c2771eaee632371488e9b195fa">registry</a>, my_types);</div>
<div class="ttc" id="a008__registry__introspection_8c_html_aa7e646c2771eaee632371488e9b195fa"><div class="ttname"><a href="008__registry__introspection_8c.html#aa7e646c2771eaee632371488e9b195fa">registry</a></div><div class="ttdeci">infix_registry_t * registry</div><div class="ttdef"><b>Definition</b> 008_registry_introspection.c:33</div></div>
<div class="ttc" id="agroup__registry__api_html_ga9ffe6b87941bcb364cc386ae7b0877cd"><div class="ttname"><a href="group__registry__api.html#ga9ffe6b87941bcb364cc386ae7b0877cd">infix_register_types</a></div><div class="ttdeci">INFIX_API INFIX_NODISCARD infix_status infix_register_types(infix_registry_t *, const char *)</div><div class="ttdoc">Parses a string of type definitions and adds them to a registry.</div><div class="ttdef"><b>Definition</b> type_registry.c:523</div></div>
</div><!-- fragment --></dd></dl>
<p>This function uses a robust <b>three-pass approach</b> to handle complex dependencies, including out-of-order and mutually recursive definitions.</p>
<ul>
<li><b>Pass 1 (Scan &amp; Index):</b> The entire definition string is scanned. The parser identifies every type name being defined (<code>@Name = ...</code>) or forward-declared (<code>@Name;</code>). It creates an entry for each name in the registry's hash table. Critically, if a forward declaration is found, a placeholder <code>infix_type</code> is created immediately to ensure subsequent lookups succeed.</li>
<li><b>Pass 2 (Parse &amp; Copy):</b> The function iterates through the definitions indexed in Pass 1. For each one, it calls the main signature parser to create a raw type graph. This graph is then copied into the registry's arena. If a placeholder already exists from Pass 1, the new definition is copied <em>in-place</em> over the placeholder to preserve existing pointers.</li>
<li><b>Pass 3 (Resolve &amp; Layout):</b> The function iterates through all the newly created types from Pass 2. For each one, it performs the "Resolve" and "Layout" stages. Because all type graphs now exist (either fully defined or as valid placeholders), resolution succeeds for all recursive references.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">registry</td><td>The registry to populate. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">definitions</td><td>A semicolon-separated string of definitions. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>INFIX_SUCCESS</code> on success, or an error code on failure. </dd></dl>

</div>
</div>
<a id="gaf72b9865f88d0e587b47cb5bd54e589b" name="gaf72b9865f88d0e587b47cb5bd54e589b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf72b9865f88d0e587b47cb5bd54e589b">&#9670;&#160;</a></span>infix_registry_clone()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__version__info.html#gaf6436c47724bc1059aa82f37329f7991">INFIX_API</a> <a class="el" href="group__version__info.html#ga9806a5783de91a5ddc7798bca59aaa10">INFIX_NODISCARD</a> <a class="el" href="structinfix__registry__t.html">infix_registry_t</a> * infix_registry_clone </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structinfix__registry__t.html">infix_registry_t</a> *&#160;</td>
          <td class="paramname"><em>src</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a deep copy of an existing type registry. </p>
<p>This copies all defined types and their dependency graphs into a new registry with its own arena. This is essential for thread safety in languages that spawn threads by cloning interpreter state (like Perl).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">registry</td><td>The registry to clone. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the new registry, or <code>nullptr</code> on failure.</dd></dl>
<p>Creates a deep copy of an existing type registry.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">src</td><td>The source registry to clone. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A new registry containing deep copies of all types in 'src', or NULL on failure. </dd></dl>

</div>
</div>
<a id="gabc173ceb38459e181fb2e9c724da9a92" name="gabc173ceb38459e181fb2e9c724da9a92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabc173ceb38459e181fb2e9c724da9a92">&#9670;&#160;</a></span>infix_registry_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__version__info.html#gaf6436c47724bc1059aa82f37329f7991">INFIX_API</a> <a class="el" href="group__version__info.html#ga9806a5783de91a5ddc7798bca59aaa10">INFIX_NODISCARD</a> <a class="el" href="structinfix__registry__t.html">infix_registry_t</a> * infix_registry_create </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a new, empty named type registry. </p>
<p>A registry acts as a dictionary for <code>infix</code> types, allowing you to define complex structs, unions, or aliases once and refer to them by name (e.g., <code>@MyStruct</code>) in any signature string. This is essential for managing complex, recursive, or mutually-dependent types.</p>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the new registry, or <code>nullptr</code> on allocation failure. The returned handle must be freed with <code>infix_registry_destroy</code>. </dd></dl>

</div>
</div>
<a id="ga4945e0a2c35c5c435e1fa436db0d9e74" name="ga4945e0a2c35c5c435e1fa436db0d9e74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4945e0a2c35c5c435e1fa436db0d9e74">&#9670;&#160;</a></span>infix_registry_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__version__info.html#gaf6436c47724bc1059aa82f37329f7991">INFIX_API</a> void infix_registry_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinfix__registry__t.html">infix_registry_t</a> *&#160;</td>
          <td class="paramname"><em>registry</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroys a type registry and frees all associated memory. </p>
<p>This includes freeing the registry handle itself, its internal hash table, and all <code>infix_type</code> objects that were created as part of a definition.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">registry</td><td>The registry to destroy. Safe to call with <code>nullptr</code>.</td></tr>
  </table>
  </dd>
</dl>
<p>This includes freeing the registry handle itself and its internal arena, which in turn frees the hash table, all entry structs, and all canonical <code>infix_type</code> objects that were created as part of a type definition.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">registry</td><td>The registry to destroy. Safe to call with <code>nullptr</code>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
