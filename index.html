<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>infix: &lt;tt&gt;infix&lt;/tt&gt;: A JIT-powered FFI library for C</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript"> DoxygenAwesomeDarkModeToggle.init() </script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript"> DoxygenAwesomeFragmentCopyButton.init() </script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript"> DoxygenAwesomeParagraphLink.init() </script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript"> DoxygenAwesomeInteractiveToc.init() </script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">infix
   </div>
   <div id="projectbrief">A JIT-Powered FFI Library for C</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title"><code>infix</code>: A JIT-powered FFI library for C </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a> <code>infix</code> is a modern, lightweight C library that lets you call any C function or create C callbacks at runtime, using simple, human-readable strings to describe the function's signature.</p>
<p>It's designed to be the simplest way to add a dynamic Foreign Function Interface (FFI) to your project, whether you're building a language runtime, a plugin system, or just need to call functions from a dynamically loaded library.</p>
<p>![CI](https://github.com/sanko/infix/actions/workflows/ci.yml/badge.svg)</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Key Features</h1>
<ul>
<li><b>Human-Readable Signatures:</b> Describe complex C functions with an intuitive string format (e.g., <code>"({double, double}, int) -&gt; *char"</code>).</li>
<li><b>Forward &amp; Reverse Calls:</b> Call C functions ("forward") and create C function pointers that call back into your code ("reverse").</li>
<li><b>Direct Marshalling API:</b> Build high-performance language bindings where the JIT compiler calls your object-unboxing functions directly, bypassing intermediate buffers.</li>
<li><b>Simple Integration:</b> Add a single C file and a header directory to your project to get started. No complex dependencies.</li>
<li><b>Type Registry:</b> Define, reuse, and link complex, recursive, and mutually-dependent structs by name.</li>
<li><b>Security-First Design:</b> Hardened against vulnerabilities with Write XOR Execute (W^X) memory, guard pages, and fuzz testing.</li>
<li><b>High Performance:</b> A Just-in-Time (JIT) compiler generates optimized machine code trampolines, making calls nearly as fast as a direct C call after the initial setup.</li>
</ul>
<h1><a class="anchor" id="autotoc_md2"></a>
Full Documentation</h1>
<ul>
<li><a class="el" href="md_docs_2INSTALL.html">Installation Guide</a>: How to build and integrate <code>infix</code>.</li>
<li><a class="el" href="md_docs_2API.html">API Quick Reference</a>: A complete reference for the public API.</li>
<li><a class="el" href="md_docs_2cookbook.html">The FFI Cookbook</a>: Practical, real-world examples and recipes.</li>
<li><a class="el" href="md_docs_2signatures.html">Signature Language Reference</a>: A deep dive into the signature string format.</li>
<li><a class="el" href="md_docs_2porting.html">Porting Guide</a>: Instructions for adding support for a new CPU architecture or ABI.</li>
<li>Contributing Guide: How to contribute to the project.</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md4"></a>
How It Works: A Quick Example</h1>
<p>The heart of <code>infix</code> is its signature string. Here’s how you would call a simple C function:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="infix_8h.html">infix/infix.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// The C function we want to call.</span></div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="Ch04__ThreadSafety_8c.html#a876d849a2f1867b8b2be9881f4a191d5">add</a>(<span class="keywordtype">int</span> a, <span class="keywordtype">int</span> b) { <span class="keywordflow">return</span> a + b; }</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="821__threading__bare_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main</a>() {</div>
<div class="line">    <span class="comment">// 1. Describe the function&#39;s signature as a string.</span></div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span>* signature = <span class="stringliteral">&quot;(int, int) -&gt; int&quot;</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// 2. Create a &quot;trampoline&quot;—a JIT-compiled function wrapper.</span></div>
<div class="line">    <a class="code hl_struct" href="structinfix__forward__t.html">infix_forward_t</a>* trampoline = NULL;</div>
<div class="line">    <a class="code hl_function" href="group__high__level__api.html#ga5362b6f6976298aebefdb2a487e72e36">infix_forward_create</a>(&amp;trampoline, signature, (<span class="keywordtype">void</span>*)<a class="code hl_function" href="Ch04__ThreadSafety_8c.html#a876d849a2f1867b8b2be9881f4a191d5">add</a>, NULL);</div>
<div class="line">    <a class="code hl_typedef" href="group__high__level__api.html#ga3042690c20cccd4137f134154bd62e1a">infix_cif_func</a> cif = <a class="code hl_function" href="group__introspection__api.html#ga32fc7e60dd474cebc4ac082e49ac9ea8">infix_forward_get_code</a>(trampoline);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// 3. Prepare an array of *pointers* to the arguments.</span></div>
<div class="line">    <span class="keywordtype">int</span> a = 10, b = 32;</div>
<div class="line">    <span class="keywordtype">void</span>* <a class="code hl_variable" href="202__in__structs_8c.html#a0ad795b9f107bb50006cfa54f5671f2e">args</a>[] = { &amp;a, &amp;b };</div>
<div class="line">    <span class="keywordtype">int</span> result;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// 4. Call the function through the trampoline.</span></div>
<div class="line">    cif(&amp;result, <a class="code hl_variable" href="202__in__structs_8c.html#a0ad795b9f107bb50006cfa54f5671f2e">args</a>);</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;Result: %d\n&quot;</span>, result); <span class="comment">// Output: Result: 42</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// 5. Clean up.</span></div>
<div class="line">    <a class="code hl_function" href="group__manual__api.html#gad87a8882dec00b89a4bc5c87db2fc032">infix_forward_destroy</a>(trampoline);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="a202__in__structs_8c_html_a0ad795b9f107bb50006cfa54f5671f2e"><div class="ttname"><a href="202__in__structs_8c.html#a0ad795b9f107bb50006cfa54f5671f2e">args</a></div><div class="ttdeci">void * args[]</div><div class="ttdef"><b>Definition</b> 202_in_structs.c:57</div></div>
<div class="ttc" id="a821__threading__bare_8c_html_a840291bc02cba5474a4cb46a9b9566fe"><div class="ttname"><a href="821__threading__bare_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main</a></div><div class="ttdeci">int main(void)</div><div class="ttdef"><b>Definition</b> 821_threading_bare.c:69</div></div>
<div class="ttc" id="aCh04__ThreadSafety_8c_html_a876d849a2f1867b8b2be9881f4a191d5"><div class="ttname"><a href="Ch04__ThreadSafety_8c.html#a876d849a2f1867b8b2be9881f4a191d5">add</a></div><div class="ttdeci">static int add(int a, int b)</div><div class="ttdef"><b>Definition</b> Ch04_ThreadSafety.c:25</div></div>
<div class="ttc" id="agroup__high__level__api_html_ga3042690c20cccd4137f134154bd62e1a"><div class="ttname"><a href="group__high__level__api.html#ga3042690c20cccd4137f134154bd62e1a">infix_cif_func</a></div><div class="ttdeci">void(* infix_cif_func)(void *, void **)</div><div class="ttdoc">A function pointer type for a bound forward trampoline.</div><div class="ttdef"><b>Definition</b> infix.h:336</div></div>
<div class="ttc" id="agroup__high__level__api_html_ga5362b6f6976298aebefdb2a487e72e36"><div class="ttname"><a href="group__high__level__api.html#ga5362b6f6976298aebefdb2a487e72e36">infix_forward_create</a></div><div class="ttdeci">c23_nodiscard infix_status infix_forward_create(infix_forward_t **, const char *, void *, infix_registry_t *)</div><div class="ttdoc">Creates a &quot;bound&quot; forward trampoline from a signature string.</div><div class="ttdef"><b>Definition</b> trampoline.c:989</div></div>
<div class="ttc" id="agroup__introspection__api_html_ga32fc7e60dd474cebc4ac082e49ac9ea8"><div class="ttname"><a href="group__introspection__api.html#ga32fc7e60dd474cebc4ac082e49ac9ea8">infix_forward_get_code</a></div><div class="ttdeci">c23_nodiscard infix_cif_func infix_forward_get_code(infix_forward_t *)</div><div class="ttdoc">Gets the callable function pointer from a bound forward trampoline.</div><div class="ttdef"><b>Definition</b> trampoline.c:278</div></div>
<div class="ttc" id="agroup__manual__api_html_gad87a8882dec00b89a4bc5c87db2fc032"><div class="ttname"><a href="group__manual__api.html#gad87a8882dec00b89a4bc5c87db2fc032">infix_forward_destroy</a></div><div class="ttdeci">void infix_forward_destroy(infix_forward_t *)</div><div class="ttdoc">Destroys a forward trampoline and frees all associated memory.</div><div class="ttdef"><b>Definition</b> trampoline.c:631</div></div>
<div class="ttc" id="ainfix_8h_html"><div class="ttname"><a href="infix_8h.html">infix.h</a></div><div class="ttdoc">The public interface for the infix FFI library.</div></div>
<div class="ttc" id="astructinfix__forward__t_html"><div class="ttname"><a href="structinfix__forward__t.html">infix_forward_t</a></div><div class="ttdoc">Internal definition of a forward trampoline handle.</div><div class="ttdef"><b>Definition</b> infix_internals.h:88</div></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md5"></a>
Creating Callbacks</h1>
<p><code>infix</code> can also generate native C function pointers that call back into your code. This is perfect for interfacing with C libraries that expect callbacks, like <code>qsort</code>.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="infix_8h.html">infix/infix.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// The C handler function for our callback.</span></div>
<div class="line"><span class="keywordtype">int</span> compare_integers(<span class="keyword">const</span> <span class="keywordtype">void</span>* a, <span class="keyword">const</span> <span class="keywordtype">void</span>* b) {</div>
<div class="line">    <span class="keywordflow">return</span> (*(<span class="keyword">const</span> <span class="keywordtype">int</span>*)a - *(<span class="keyword">const</span> <span class="keywordtype">int</span>*)b);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> run_qsort_example() {</div>
<div class="line">    <span class="comment">// 1. Describe the callback&#39;s signature.</span></div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span>* cmp_sig = <span class="stringliteral">&quot;(*void, *void) -&gt; int&quot;</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// 2. Create a reverse trampoline.</span></div>
<div class="line">    <a class="code hl_struct" href="structinfix__reverse__t.html">infix_reverse_t</a>* context = NULL;</div>
<div class="line">    <a class="code hl_function" href="group__high__level__api.html#ga010d41376c47f1100903d427776033ab">infix_reverse_create_callback</a>(&amp;context, cmp_sig, (<span class="keywordtype">void</span>*)compare_integers, NULL);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// 3. Get the JIT-compiled C function pointer.</span></div>
<div class="line">    int (*my_comparator)(<span class="keyword">const</span> <span class="keywordtype">void</span>*, <span class="keyword">const</span> <span class="keywordtype">void</span>*) = <a class="code hl_function" href="group__introspection__api.html#ga3b75e8481ac13d11faa15046fc4adb66">infix_reverse_get_code</a>(context);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// 4. Use the generated callback with the C library function.</span></div>
<div class="line">    <span class="keywordtype">int</span> numbers[] = { 5, 1, 4, 2, 3 };</div>
<div class="line">    qsort(numbers, 5, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), my_comparator);</div>
<div class="line">    <span class="comment">// `numbers` is now sorted: [1, 2, 3, 4, 5]</span></div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="group__manual__api.html#ga00b101025663c423a28433e139be5d4e">infix_reverse_destroy</a>(context);</div>
<div class="line">}</div>
<div class="ttc" id="agroup__high__level__api_html_ga010d41376c47f1100903d427776033ab"><div class="ttname"><a href="group__high__level__api.html#ga010d41376c47f1100903d427776033ab">infix_reverse_create_callback</a></div><div class="ttdeci">c23_nodiscard infix_status infix_reverse_create_callback(infix_reverse_t **, const char *, void *, infix_registry_t *)</div><div class="ttdoc">Creates a type-safe reverse trampoline (callback).</div><div class="ttdef"><b>Definition</b> trampoline.c:1044</div></div>
<div class="ttc" id="agroup__introspection__api_html_ga3b75e8481ac13d11faa15046fc4adb66"><div class="ttname"><a href="group__introspection__api.html#ga3b75e8481ac13d11faa15046fc4adb66">infix_reverse_get_code</a></div><div class="ttdeci">c23_nodiscard void * infix_reverse_get_code(const infix_reverse_t *)</div><div class="ttdoc">Gets the native, callable C function pointer from a reverse trampoline.</div><div class="ttdef"><b>Definition</b> trampoline.c:895</div></div>
<div class="ttc" id="agroup__manual__api_html_ga00b101025663c423a28433e139be5d4e"><div class="ttname"><a href="group__manual__api.html#ga00b101025663c423a28433e139be5d4e">infix_reverse_destroy</a></div><div class="ttdeci">void infix_reverse_destroy(infix_reverse_t *)</div><div class="ttdoc">Destroys a reverse trampoline and frees all associated memory.</div><div class="ttdef"><b>Definition</b> trampoline.c:877</div></div>
<div class="ttc" id="astructinfix__reverse__t_html"><div class="ttname"><a href="structinfix__reverse__t.html">infix_reverse_t</a></div><div class="ttdoc">Internal definition of a reverse trampoline (callback/closure) handle.</div><div class="ttdef"><b>Definition</b> infix_internals.h:114</div></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md6"></a>
High-Performance Language Bindings</h1>
<p>If you are writing a binding for a language like Python, Perl, or Lua, <code>infix</code> offers a specialized direct marshalling API. This allows the JIT compiler to call your object unboxing functions ("marshallers") directly, eliminating the need to allocate intermediate C arrays.</p>
<div class="fragment"><div class="line"><span class="comment">// A mock object from a scripting language.</span></div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>{ <span class="keywordtype">int</span> type; <span class="keyword">union </span>{ <span class="keywordtype">int</span> i; <span class="keywordtype">double</span> d; } val; } PyObject;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// A &quot;Scalar Marshaller&quot; converts a language object to a raw C value.</span></div>
<div class="line"><a class="code hl_union" href="unioninfix__direct__value__t.html">infix_direct_value_t</a> marshal_int(<span class="keywordtype">void</span>* obj_ptr) {</div>
<div class="line">    PyObject* obj = (PyObject*)obj_ptr;</div>
<div class="line">    <span class="keywordflow">return</span> (<a class="code hl_union" href="unioninfix__direct__value__t.html">infix_direct_value_t</a>){ .<a class="code hl_variable" href="group__high__level__api.html#gadba7bc037f3d126d3ba31f1ec2567dbd">i64</a> = obj-&gt;val.i };</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> run_binding_example(<span class="keywordtype">void</span>* target_func) {</div>
<div class="line">    <span class="comment">// 1. Define handlers for the arguments.</span></div>
<div class="line">    <a class="code hl_struct" href="structinfix__direct__arg__handler__t.html">infix_direct_arg_handler_t</a> <a class="code hl_variable" href="901__call__overhead_8c.html#ae25bcbce63d0ec5da113a351193b608e">handlers</a>[2] = {0};</div>
<div class="line">    <a class="code hl_variable" href="901__call__overhead_8c.html#ae25bcbce63d0ec5da113a351193b608e">handlers</a>[0].<a class="code hl_variable" href="group__high__level__api.html#gaa1e4370577f1c6effe1db98e594032c1">scalar_marshaller</a> = marshal_int;</div>
<div class="line">    <a class="code hl_variable" href="901__call__overhead_8c.html#ae25bcbce63d0ec5da113a351193b608e">handlers</a>[1].<a class="code hl_variable" href="group__high__level__api.html#gaa1e4370577f1c6effe1db98e594032c1">scalar_marshaller</a> = marshal_int;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// 2. Create an optimized trampoline.</span></div>
<div class="line">    <a class="code hl_struct" href="structinfix__forward__t.html">infix_forward_t</a>* trampoline;</div>
<div class="line">    <a class="code hl_function" href="group__direct__marshalling__api.html#ga2618eb29271aceb0df6aea41cbde1541">infix_forward_create_direct</a>(&amp;trampoline, <span class="stringliteral">&quot;(int, int) -&gt; void&quot;</span>, target_func, <a class="code hl_variable" href="901__call__overhead_8c.html#ae25bcbce63d0ec5da113a351193b608e">handlers</a>, NULL);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// 3. Call it directly with an array of language objects.</span></div>
<div class="line">    PyObject* <a class="code hl_variable" href="202__in__structs_8c.html#a0ad795b9f107bb50006cfa54f5671f2e">args</a>[] = { py_obj1, py_obj2 };</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// The JIT code calls `marshal_int` for each arg, then calls the target.</span></div>
<div class="line">    <a class="code hl_function" href="group__direct__marshalling__api.html#gac9f07b550fbe492d5948833561a5e9d7">infix_forward_get_direct_code</a>(trampoline)(NULL, (<span class="keywordtype">void</span>**)<a class="code hl_variable" href="202__in__structs_8c.html#a0ad795b9f107bb50006cfa54f5671f2e">args</a>);</div>
<div class="line">}</div>
<div class="ttc" id="a901__call__overhead_8c_html_ae25bcbce63d0ec5da113a351193b608e"><div class="ttname"><a href="901__call__overhead_8c.html#ae25bcbce63d0ec5da113a351193b608e">handlers</a></div><div class="ttdeci">infix_direct_arg_handler_t handlers[2]</div><div class="ttdef"><b>Definition</b> 901_call_overhead.c:103</div></div>
<div class="ttc" id="agroup__direct__marshalling__api_html_ga2618eb29271aceb0df6aea41cbde1541"><div class="ttname"><a href="group__direct__marshalling__api.html#ga2618eb29271aceb0df6aea41cbde1541">infix_forward_create_direct</a></div><div class="ttdeci">c23_nodiscard infix_status infix_forward_create_direct(infix_forward_t **out_trampoline, const char *signature, void *target_function, infix_direct_arg_handler_t *handlers, infix_registry_t *registry)</div><div class="ttdoc">Creates a forward trampoline with direct, JIT-bound marshalling.</div><div class="ttdef"><b>Definition</b> trampoline.c:1000</div></div>
<div class="ttc" id="agroup__direct__marshalling__api_html_gac9f07b550fbe492d5948833561a5e9d7"><div class="ttname"><a href="group__direct__marshalling__api.html#gac9f07b550fbe492d5948833561a5e9d7">infix_forward_get_direct_code</a></div><div class="ttdeci">c23_nodiscard infix_direct_cif_func infix_forward_get_direct_code(infix_forward_t *trampoline)</div><div class="ttdoc">Gets the callable function pointer from a direct marshalling trampoline.</div><div class="ttdef"><b>Definition</b> trampoline.c:283</div></div>
<div class="ttc" id="agroup__high__level__api_html_gaa1e4370577f1c6effe1db98e594032c1"><div class="ttname"><a href="group__high__level__api.html#gaa1e4370577f1c6effe1db98e594032c1">infix_direct_arg_handler_t::scalar_marshaller</a></div><div class="ttdeci">infix_marshaller_fn scalar_marshaller</div><div class="ttdoc">For &quot;in&quot; parameters of a scalar type (int, float, pointer).</div><div class="ttdef"><b>Definition</b> infix.h:1356</div></div>
<div class="ttc" id="agroup__high__level__api_html_gadba7bc037f3d126d3ba31f1ec2567dbd"><div class="ttname"><a href="group__high__level__api.html#gadba7bc037f3d126d3ba31f1ec2567dbd">infix_direct_value_t::i64</a></div><div class="ttdeci">int64_t i64</div><div class="ttdoc">Used for all signed integer types up to 64 bits.</div><div class="ttdef"><b>Definition</b> infix.h:1302</div></div>
<div class="ttc" id="astructinfix__direct__arg__handler__t_html"><div class="ttname"><a href="structinfix__direct__arg__handler__t.html">infix_direct_arg_handler_t</a></div><div class="ttdoc">A struct containing all the necessary handlers for a single function argument.</div><div class="ttdef"><b>Definition</b> infix.h:1354</div></div>
<div class="ttc" id="aunioninfix__direct__value__t_html"><div class="ttname"><a href="unioninfix__direct__value__t.html">infix_direct_value_t</a></div><div class="ttdoc">A union to hold any primitive value returned by a scalar marshaller.</div><div class="ttdef"><b>Definition</b> infix.h:1300</div></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md7"></a>
Getting Started</h1>
<p>The easiest way to use <code>infix</code> is to add its source directly to your project.</p>
<ol type="1">
<li>Copy the <code>src/</code> and <code>include/</code> directories into your project.</li>
<li>Add <code><a class="el" href="infix_8c.html" title="The unity build source file for the infix library.">src/infix.c</a></code> to your build system's list of source files.</li>
<li>Add the <code>include/</code> directory to your include paths.</li>
<li><code>#include &lt;<a class="el" href="infix_8h.html" title="The public interface for the infix FFI library.">infix/infix.h</a>&gt;</code> in your code.</li>
</ol>
<p>For more advanced build options, including building as a standalone library with CMake or xmake, see the <a class="el" href="md_docs_2INSTALL.html">Building and Integration Guide</a>.</p>
<h1><a class="anchor" id="autotoc_md8"></a>
Project Philosophy</h1>
<p><code>infix</code> is built on three core principles:</p>
<ol type="1">
<li><b>Security First:</b> An FFI library with a JIT is a prime target for vulnerabilities. We defend against these with a multi-layered approach, including strict W^X memory, hardened integer arithmetic, and continuous fuzz testing.</li>
<li><b>Performance by Design:</b> FFI overhead should be minimal. <code>infix</code> separates the one-time <b>generation cost</b> from the near-zero <b>call-time cost</b>, making it exceptionally fast in high-performance applications when trampolines are cached.</li>
<li><b>Simplicity and Portability:</b> Platform- and ABI-specific logic is strictly isolated, making the library easy to maintain, simple to integrate, and straightforward to port to new architectures.</li>
</ol>
<h1><a class="anchor" id="autotoc_md9"></a>
Platform Support</h1>
<p><code>infix</code> is rigorously tested on a wide array of operating systems, compilers, and architectures with every commit.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">OS   </th><th class="markdownTableHeadLeft">Version   </th><th class="markdownTableHeadLeft">Architecture   </th><th class="markdownTableHeadLeft">Compiler   </th><th class="markdownTableHeadLeft">Status    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">DragonflyBSD   </td><td class="markdownTableBodyLeft">6.4.0   </td><td class="markdownTableBodyLeft">x86-64   </td><td class="markdownTableBodyLeft">GCC   </td><td class="markdownTableBodyLeft"><img src="https://img.shields.io/badge/dynamic/json?url=https%3A%2F%2Fsankorobinson.com%2Finfix%2Fstatus%2Fstatus.json&amp;style=for-the-badge&amp;label=%20&amp;query=dragonflybsd-x86_64-gcc" alt="dragonflybsd/x64/gcc" class="inline"/>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">FreeBSD   </td><td class="markdownTableBodyLeft">14.3   </td><td class="markdownTableBodyLeft">x86-64   </td><td class="markdownTableBodyLeft">GCC   </td><td class="markdownTableBodyLeft"><img src="https://img.shields.io/badge/dynamic/json?url=https%3A%2F%2Fsankorobinson.com%2Finfix%2Fstatus%2Fstatus.json&amp;style=for-the-badge&amp;label=%20&amp;query=freebsd-x86_64-gcc" alt="freebsd/x86/gcc     " class="inline"/>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"></td><td class="markdownTableBodyLeft">14.3   </td><td class="markdownTableBodyLeft">AArch64   </td><td class="markdownTableBodyLeft">GCC   </td><td class="markdownTableBodyLeft"><img src="https://img.shields.io/badge/dynamic/json?url=https%3A%2F%2Fsankorobinson.com%2Finfix%2Fstatus%2Fstatus.json&amp;style=for-the-badge&amp;label=%20&amp;query=freebsd-aarch64-gcc" alt="freebsd/a64/gcc     " class="inline"/>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"></td><td class="markdownTableBodyLeft">14.3   </td><td class="markdownTableBodyLeft">x86-64   </td><td class="markdownTableBodyLeft">Clang   </td><td class="markdownTableBodyLeft"><img src="https://img.shields.io/badge/dynamic/json?url=https%3A%2F%2Fsankorobinson.com%2Finfix%2Fstatus%2Fstatus.json&amp;style=for-the-badge&amp;label=%20&amp;query=freebsd-x86_64-clang" alt="freebsd/x64/clang   " class="inline"/>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"></td><td class="markdownTableBodyLeft">14.3   </td><td class="markdownTableBodyLeft">AArch64   </td><td class="markdownTableBodyLeft">Clang   </td><td class="markdownTableBodyLeft"><img src="https://img.shields.io/badge/dynamic/json?url=https%3A%2F%2Fsankorobinson.com%2Finfix%2Fstatus%2Fstatus.json&amp;style=for-the-badge&amp;label=%20&amp;query=freebsd-aarch64-clang" alt="freebsd/a64/clang   " class="inline"/>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">macOS   </td><td class="markdownTableBodyLeft">Sequoia   </td><td class="markdownTableBodyLeft">AArch64   </td><td class="markdownTableBodyLeft">Clang   </td><td class="markdownTableBodyLeft"><img src="https://img.shields.io/badge/dynamic/json?url=https%3A%2F%2Fsankorobinson.com%2Finfix%2Fstatus%2Fstatus.json&amp;style=for-the-badge&amp;label=%20&amp;query=macos-x86_64-clang" alt="macos/a64/clang     " class="inline"/>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"></td><td class="markdownTableBodyLeft">Sequoia   </td><td class="markdownTableBodyLeft">AArch64   </td><td class="markdownTableBodyLeft">GCC   </td><td class="markdownTableBodyLeft"><img src="https://img.shields.io/badge/dynamic/json?url=https%3A%2F%2Fsankorobinson.com%2Finfix%2Fstatus%2Fstatus.json&amp;style=for-the-badge&amp;label=%20&amp;query=macos-x86_64-gcc" alt="macos/a64/gcc       " class="inline"/>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">NetBSD   </td><td class="markdownTableBodyLeft">10.1   </td><td class="markdownTableBodyLeft">AArch64   </td><td class="markdownTableBodyLeft">GCC   </td><td class="markdownTableBodyLeft"><img src="https://img.shields.io/badge/dynamic/json?url=https%3A%2F%2Fsankorobinson.com%2Finfix%2Fstatus%2Fstatus.json&amp;style=for-the-badge&amp;label=%20&amp;query=netbsd-aarch64-gcc" alt="netbsd/a64/gcc      " class="inline"/>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"></td><td class="markdownTableBodyLeft">10.1   </td><td class="markdownTableBodyLeft">x86-64   </td><td class="markdownTableBodyLeft">GCC   </td><td class="markdownTableBodyLeft"><img src="https://img.shields.io/badge/dynamic/json?url=https%3A%2F%2Fsankorobinson.com%2Finfix%2Fstatus%2Fstatus.json&amp;style=for-the-badge&amp;label=%20&amp;query=netbsd-x86_64-gcc" alt="netbsd/x64/gcc      " class="inline"/>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">OmniOS   </td><td class="markdownTableBodyLeft">r151052   </td><td class="markdownTableBodyLeft">x86-64   </td><td class="markdownTableBodyLeft">GCC   </td><td class="markdownTableBodyLeft"><img src="https://img.shields.io/badge/dynamic/json?url=https%3A%2F%2Fsankorobinson.com%2Finfix%2Fstatus%2Fstatus.json&amp;style=for-the-badge&amp;label=%20&amp;query=omnios-x86_64-gcc" alt="omnios/x64/gcc      " class="inline"/>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">OpenBSD   </td><td class="markdownTableBodyLeft">7.7   </td><td class="markdownTableBodyLeft">AArch64   </td><td class="markdownTableBodyLeft">Clang   </td><td class="markdownTableBodyLeft"><img src="https://img.shields.io/badge/dynamic/json?url=https%3A%2F%2Fsankorobinson.com%2Finfix%2Fstatus%2Fstatus.json&amp;style=for-the-badge&amp;label=%20&amp;query=openbsd-aarch64-clang" alt="openbsd/a64/clang   " class="inline"/>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"></td><td class="markdownTableBodyLeft">7.7   </td><td class="markdownTableBodyLeft">AArch64   </td><td class="markdownTableBodyLeft">GCC   </td><td class="markdownTableBodyLeft"><img src="https://img.shields.io/badge/dynamic/json?url=https%3A%2F%2Fsankorobinson.com%2Finfix%2Fstatus%2Fstatus.json&amp;style=for-the-badge&amp;label=%20&amp;query=openbsd-aarch64-egcc" alt="openbsd/a64/gcc     " class="inline"/>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"></td><td class="markdownTableBodyLeft">7.7   </td><td class="markdownTableBodyLeft">x86-64   </td><td class="markdownTableBodyLeft">Clang   </td><td class="markdownTableBodyLeft"><img src="https://img.shields.io/badge/dynamic/json?url=https%3A%2F%2Fsankorobinson.com%2Finfix%2Fstatus%2Fstatus.json&amp;style=for-the-badge&amp;label=%20&amp;query=openbsd-x86_64-clang" alt="openbsd/x64/clang   " class="inline"/>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"></td><td class="markdownTableBodyLeft">7.7   </td><td class="markdownTableBodyLeft">x86-64   </td><td class="markdownTableBodyLeft">Clang   </td><td class="markdownTableBodyLeft"><img src="https://img.shields.io/badge/dynamic/json?url=https%3A%2F%2Fsankorobinson.com%2Finfix%2Fstatus%2Fstatus.json&amp;style=for-the-badge&amp;label=%20&amp;query=openbsd-x86_64-egcc" alt="openbsd/x64/clang   " class="inline"/>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Solaris   </td><td class="markdownTableBodyLeft">11.4   </td><td class="markdownTableBodyLeft">x86-64   </td><td class="markdownTableBodyLeft">GCC   </td><td class="markdownTableBodyLeft"><img src="https://img.shields.io/badge/dynamic/json?url=https%3A%2F%2Fsankorobinson.com%2Finfix%2Fstatus%2Fstatus.json&amp;style=for-the-badge&amp;label=%20&amp;query=solaris-x86_64-gcc" alt="solaris/x64/gcc     " class="inline"/>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Ubuntu   </td><td class="markdownTableBodyLeft">24.04   </td><td class="markdownTableBodyLeft">AArch64   </td><td class="markdownTableBodyLeft">Clang   </td><td class="markdownTableBodyLeft"><img src="https://img.shields.io/badge/dynamic/json?url=https%3A%2F%2Fsankorobinson.com%2Finfix%2Fstatus%2Fstatus.json&amp;style=for-the-badge&amp;label=%20&amp;query=ubuntu-arm-aarch64-clang" alt="ubuntu/a64/clang    " class="inline"/>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"></td><td class="markdownTableBodyLeft">24.04   </td><td class="markdownTableBodyLeft">AArch64   </td><td class="markdownTableBodyLeft">GCC   </td><td class="markdownTableBodyLeft"><img src="https://img.shields.io/badge/dynamic/json?url=https%3A%2F%2Fsankorobinson.com%2Finfix%2Fstatus%2Fstatus.json&amp;style=for-the-badge&amp;label=%20&amp;query=ubuntu-arm-aarch64-gcc" alt="ubuntu/a64/gcc      " class="inline"/>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"></td><td class="markdownTableBodyLeft">24.04   </td><td class="markdownTableBodyLeft">x86-64   </td><td class="markdownTableBodyLeft">Clang   </td><td class="markdownTableBodyLeft"><img src="https://img.shields.io/badge/dynamic/json?url=https%3A%2F%2Fsankorobinson.com%2Finfix%2Fstatus%2Fstatus.json&amp;style=for-the-badge&amp;label=%20&amp;query=ubuntu-x86_64-clang" alt="ubuntu/x64/clang    " class="inline"/>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"></td><td class="markdownTableBodyLeft">24.04   </td><td class="markdownTableBodyLeft">x86-64   </td><td class="markdownTableBodyLeft">GCC   </td><td class="markdownTableBodyLeft"><img src="https://img.shields.io/badge/dynamic/json?url=https%3A%2F%2Fsankorobinson.com%2Finfix%2Fstatus%2Fstatus.json&amp;style=for-the-badge&amp;label=%20&amp;query=ubuntu-x86_64-gcc" alt="ubuntu/x64/gcc      " class="inline"/>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Windows   </td><td class="markdownTableBodyLeft">Server 2025   </td><td class="markdownTableBodyLeft">AArch64   </td><td class="markdownTableBodyLeft">Clang   </td><td class="markdownTableBodyLeft"><img src="https://img.shields.io/badge/dynamic/json?url=https%3A%2F%2Fsankorobinson.com%2Finfix%2Fstatus%2Fstatus.json&amp;style=for-the-badge&amp;label=%20&amp;query=windows-arm-aarch64-clang" alt="windows/a64/clang   " class="inline"/>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"></td><td class="markdownTableBodyLeft">Server 2025   </td><td class="markdownTableBodyLeft">AArch64   </td><td class="markdownTableBodyLeft">GCC   </td><td class="markdownTableBodyLeft"><img src="https://img.shields.io/badge/dynamic/json?url=https%3A%2F%2Fsankorobinson.com%2Finfix%2Fstatus%2Fstatus.json&amp;style=for-the-badge&amp;label=%20&amp;query=windows-arm-aarch64-gcc" alt="windows/a64/gcc     " class="inline"/>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"></td><td class="markdownTableBodyLeft">Server 2025   </td><td class="markdownTableBodyLeft">AArch64   </td><td class="markdownTableBodyLeft">MSVC   </td><td class="markdownTableBodyLeft"><img src="https://img.shields.io/badge/dynamic/json?url=https%3A%2F%2Fsankorobinson.com%2Finfix%2Fstatus%2Fstatus.json&amp;style=for-the-badge&amp;label=%20&amp;query=windows-arm-aarch64-msvc" alt="windows/a64/msvc    " class="inline"/>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"></td><td class="markdownTableBodyLeft">Server 2025   </td><td class="markdownTableBodyLeft">x86-64   </td><td class="markdownTableBodyLeft">Clang   </td><td class="markdownTableBodyLeft"><img src="https://img.shields.io/badge/dynamic/json?url=https%3A%2F%2Fsankorobinson.com%2Finfix%2Fstatus%2Fstatus.json&amp;style=for-the-badge&amp;label=%20&amp;query=windows-x86_64-clang" alt="windows/x64/clang   " class="inline"/>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"></td><td class="markdownTableBodyLeft">Server 2025   </td><td class="markdownTableBodyLeft">x86-64   </td><td class="markdownTableBodyLeft">GCC   </td><td class="markdownTableBodyLeft"><img src="https://img.shields.io/badge/dynamic/json?url=https%3A%2F%2Fsankorobinson.com%2Finfix%2Fstatus%2Fstatus.json&amp;style=for-the-badge&amp;label=%20&amp;query=windows-x86_64-gcc" alt="windows/x64/gcc     " class="inline"/>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"></td><td class="markdownTableBodyLeft">Server 2025   </td><td class="markdownTableBodyLeft">x86-64   </td><td class="markdownTableBodyLeft">MSVC   </td><td class="markdownTableBodyLeft"><img src="https://img.shields.io/badge/dynamic/json?url=https%3A%2F%2Fsankorobinson.com%2Finfix%2Fstatus%2Fstatus.json&amp;style=for-the-badge&amp;label=%20&amp;query=windows-x86_64-msvc" alt="windows/x64/msvc    " class="inline"/>   </td></tr>
</table>
<p>In addition to the CI platforms tested here on Github, I can verify infix builds and passes unit tests on Android/Termux.</p>
<h1><a class="anchor" id="autotoc_md10"></a>
Licenses</h1>
<p>To maximize usability for all, <code>infix</code> is dual-licensed under the [Artistic License 2.0](LICENSE-A2) and the [MIT License](LICENSE-MIT). You may choose to use the code under the terms of either license.</p>
<p>At your discretion, all standalone documentation (<code>.md</code>), explanatory text, Doxygen-style documentation blocks, comments, and code examples contained within this repository may be used, modified, and distributed under the terms of the [Creative Commons Attribution 4.0 International License (CC BY 4.0)](LICENSE-CC). I encourage you to share and adapt the documentation for any purpose (generating an API reference website, creating tutorials, etc.), as long as you give appropriate credit. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
