<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>infix: The infix Signature and Type System</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">infix
   </div>
   <div id="projectbrief">A JIT-Powered FFI Library for C</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_docs_2signatures.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">The infix Signature and Type System</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md183"></a> </p>
<h2><a class="anchor" id="autotoc_md184"></a>
Part 1: Introduction</h2>
<h3><a class="anchor" id="autotoc_md185"></a>
1.1 The Challenge of Interoperability</h3>
<p>The core challenge of any Foreign Function Interface (FFI) is establishing a precise, unambiguous contract between the caller and the callee. Both sides must agree on the exact size, alignment, and representation of every piece of data to avoid memory corruption and undefined behavior.</p>
<h3><a class="anchor" id="autotoc_md186"></a>
1.2 The Limitations of C Declarations</h3>
<p>C's declaration syntax, while powerful, is notoriously difficult for both humans and machines to parse. It often hides the true memory layout of data, and complex declarations can be nearly indecipherable. A declaration like <code>void (*(*f[])())()</code> is a testament to this complexity.</p>
<h3><a class="anchor" id="autotoc_md187"></a>
1.3 Our Solution: A Human-First Signature System</h3>
<p><code>infix</code> solves this with a string-based representation of C types and function signatures, built on three core principles:</p>
<ol type="1">
<li><b>Human-Readability First:</b> The syntax is intuitive, avoids cryptic abbreviations, and prioritizes clarity.</li>
<li><b>Unambiguous and Consistent:</b> The grammar is designed to be parsed linearly without ambiguity, using clear delimiters (<code>{}</code>, <code>[]</code>, <code>&lt;&gt;</code>) for composite types.</li>
<li><b>Developer-Centric Type System:</b> The language provides two tiers of primitive types: abstract C-style keywords (like <code>int</code>, <code>long</code>) for general use, and explicit fixed-width keywords (like <code>int32</code>, <code>uint64</code>) for precise layout control and maximum portability.</li>
</ol>
<hr  />
<h1><a class="anchor" id="autotoc_md188"></a>
Part 2: The Signature Language Reference</h1>
<p>The signature language allows you to describe any C type as a string. All whitespace and C++-style line comments (<code># ...</code>) are ignored, allowing you to format complex signatures for readability.</p>
<h2><a class="anchor" id="autotoc_md189"></a>
2.1 Primitives</h2>
<h3><a class="anchor" id="autotoc_md190"></a>
Tier 1: Abstract C Types</h3>
<p>These keywords represent standard C types whose size can vary by platform. They are useful for quick prototyping or interacting with older C APIs.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft"><code>infix</code> Keyword   </th><th class="markdownTableHeadLeft">C/C++ Equivalent   </th><th class="markdownTableHeadLeft">Common Size   </th><th class="markdownTableHeadLeft">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>void</code>   </td><td class="markdownTableBodyLeft"><code>void</code>   </td><td class="markdownTableBodyLeft">N/A   </td><td class="markdownTableBodyLeft">Represents the absence of a value. Valid only as a function return type.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>char</code>   </td><td class="markdownTableBodyLeft"><code>signed char</code>   </td><td class="markdownTableBodyLeft">8 bits   </td><td class="markdownTableBodyLeft">A signed 8-bit integer.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>uchar</code>   </td><td class="markdownTableBodyLeft"><code>unsigned char</code>   </td><td class="markdownTableBodyLeft">8 bits   </td><td class="markdownTableBodyLeft">An unsigned 8-bit integer.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>short</code>   </td><td class="markdownTableBodyLeft"><code>short</code>   </td><td class="markdownTableBodyLeft">16 bits   </td><td class="markdownTableBodyLeft">A signed integer of at least 16 bits.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>ushort</code>   </td><td class="markdownTableBodyLeft"><code>unsigned short</code>   </td><td class="markdownTableBodyLeft">16 bits   </td><td class="markdownTableBodyLeft">An unsigned integer of at least 16 bits.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>int</code>   </td><td class="markdownTableBodyLeft"><code>int</code>   </td><td class="markdownTableBodyLeft">32 bits   </td><td class="markdownTableBodyLeft">The platform's native signed integer, usually 32 bits.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>uint</code>   </td><td class="markdownTableBodyLeft"><code>unsigned int</code>   </td><td class="markdownTableBodyLeft">32 bits   </td><td class="markdownTableBodyLeft">The platform's native unsigned integer.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>long</code>   </td><td class="markdownTableBodyLeft"><code>long</code>   </td><td class="markdownTableBodyLeft"><b>32 or 64 bits</b>   </td><td class="markdownTableBodyLeft"><b>Platform-dependent.</b> 32 bits on 64-bit Windows, 64 bits on Linux/macOS.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>ulong</code>   </td><td class="markdownTableBodyLeft"><code>unsigned long</code>   </td><td class="markdownTableBodyLeft"><b>32 or 64 bits</b>   </td><td class="markdownTableBodyLeft">The unsigned version of <code>long</code>.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>longlong</code>   </td><td class="markdownTableBodyLeft"><code>long long</code>   </td><td class="markdownTableBodyLeft">64 bits   </td><td class="markdownTableBodyLeft">A signed integer of at least 64 bits.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>ulonglong</code>   </td><td class="markdownTableBodyLeft"><code>unsigned long long</code>   </td><td class="markdownTableBodyLeft">64 bits   </td><td class="markdownTableBodyLeft">An unsigned integer of at least 64 bits.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>float</code>   </td><td class="markdownTableBodyLeft"><code>float</code>   </td><td class="markdownTableBodyLeft">32 bits   </td><td class="markdownTableBodyLeft">A 32-bit single-precision floating-point number.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>double</code>   </td><td class="markdownTableBodyLeft"><code>double</code>   </td><td class="markdownTableBodyLeft">64 bits   </td><td class="markdownTableBodyLeft">A 64-bit double-precision floating-point number.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>long double</code>   </td><td class="markdownTableBodyLeft"><code>long double</code>   </td><td class="markdownTableBodyLeft"><b>Varies</b>   </td><td class="markdownTableBodyLeft">80-bit (x86), 128-bit (AArch64), or 64-bit (MSVC) float. Use with caution.   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md191"></a>
Tier 2: Explicit Fixed-Width Types (Recommended)</h3>
<p>For maximum portability and control, these keywords guarantee the size of the type across all platforms.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft"><code>infix</code> Keyword   </th><th class="markdownTableHeadLeft">C/C++ Equivalent   </th><th class="markdownTableHeadLeft">Size   </th><th class="markdownTableHeadLeft">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>sint8</code>, <code>uint8</code>   </td><td class="markdownTableBodyLeft"><code>int8_t</code>, <code>uint8_t</code>   </td><td class="markdownTableBodyLeft">8 bits   </td><td class="markdownTableBodyLeft">Explicitly-sized 8-bit signed/unsigned integers.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>sint16</code>, <code>uint16</code>   </td><td class="markdownTableBodyLeft"><code>int16_t</code>, <code>uint16_t</code>   </td><td class="markdownTableBodyLeft">16 bits   </td><td class="markdownTableBodyLeft">Explicitly-sized 16-bit signed/unsigned integers.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>sint32</code>, <code>uint32</code>   </td><td class="markdownTableBodyLeft"><code>int32_t</code>, <code>uint32_t</code>   </td><td class="markdownTableBodyLeft">32 bits   </td><td class="markdownTableBodyLeft">Explicitly-sized 32-bit signed/unsigned integers.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>sint64</code>, <code>uint64</code>   </td><td class="markdownTableBodyLeft"><code>int64_t</code>, <code>uint64_t</code>   </td><td class="markdownTableBodyLeft">64 bits   </td><td class="markdownTableBodyLeft">Explicitly-sized 64-bit signed/unsigned integers.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>sint128</code>, <code>uint128</code>   </td><td class="markdownTableBodyLeft"><code>__int128_t</code>   </td><td class="markdownTableBodyLeft">128 bits   </td><td class="markdownTableBodyLeft">128-bit integers (GCC/Clang extension).    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>float32</code>   </td><td class="markdownTableBodyLeft"><code>float</code>   </td><td class="markdownTableBodyLeft">32 bits   </td><td class="markdownTableBodyLeft">An explicit alias for a 32-bit float.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>float64</code>   </td><td class="markdownTableBodyLeft"><code>double</code>   </td><td class="markdownTableBodyLeft">64 bits   </td><td class="markdownTableBodyLeft">An explicit alias for a 64-bit float.   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md192"></a>
2.2 Type Constructors and Composite Structures</h2>
<p>These syntax elements allow you to build complex types from simpler ones.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Name   </th><th class="markdownTableHeadLeft"><code>infix</code> Syntax   </th><th class="markdownTableHeadLeft">Example Signature   </th><th class="markdownTableHeadLeft">C/C++ Equivalent    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><b>Pointer</b>   </td><td class="markdownTableBodyLeft"><code>*&lt;type&gt;</code>   </td><td class="markdownTableBodyLeft"><code>"*int"</code>, <code>"*void"</code>   </td><td class="markdownTableBodyLeft"><code>int*</code>, <code>void*</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><b>Struct</b>   </td><td class="markdownTableBodyLeft"><code>{&lt;members&gt;}</code>   </td><td class="markdownTableBodyLeft"><code>"{int, double, *char}"</code>   </td><td class="markdownTableBodyLeft"><code>struct { ... }</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><b>Union</b>   </td><td class="markdownTableBodyLeft"><code>&lt;</code>&lt;members&gt;<code>&gt;</code>   </td><td class="markdownTableBodyLeft"><code>"&lt;int, float&gt;"</code>   </td><td class="markdownTableBodyLeft"><code>union { ... }</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><b>Array</b>   </td><td class="markdownTableBodyLeft"><code>[&lt;size&gt;:&lt;type&gt;]</code>   </td><td class="markdownTableBodyLeft"><code>"[10:double]"</code>   </td><td class="markdownTableBodyLeft"><code>double[10]</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><b>Function Pointer</b>   </td><td class="markdownTableBodyLeft"><code>(&lt;args&gt;)-&gt;&lt;ret&gt;</code>   </td><td class="markdownTableBodyLeft"><code>"(int, int)-&gt;int"</code>   </td><td class="markdownTableBodyLeft"><code>int (*)(int, int)</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">**_Complex**   </td><td class="markdownTableBodyLeft"><code>c[&lt;base_type&gt;]</code>   </td><td class="markdownTableBodyLeft"><code>"c[double]"</code>   </td><td class="markdownTableBodyLeft"><code>_Complex double</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><b>SIMD Vector</b>   </td><td class="markdownTableBodyLeft"><code>v[&lt;size&gt;:&lt;type&gt;]</code>   </td><td class="markdownTableBodyLeft"><code>"v[4:float]"</code>   </td><td class="markdownTableBodyLeft"><code>__m128</code>, <code>float32x4_t</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><b>Enum</b>   </td><td class="markdownTableBodyLeft"><code>e:&lt;int_type&gt;</code>   </td><td class="markdownTableBodyLeft"><code>"e:int"</code>   </td><td class="markdownTableBodyLeft"><code>enum { ... }</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><b>Packed Struct</b>   </td><td class="markdownTableBodyLeft"><code>!{...}</code> or <code>!&lt;N&gt;:{...}</code>   </td><td class="markdownTableBodyLeft"><code>"!{char, longlong}"</code>   </td><td class="markdownTableBodyLeft"><code>__attribute__((packed))</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><b>Variadic Function</b>   </td><td class="markdownTableBodyLeft"><code>(&lt;fixed&gt;;&lt;variadic&gt;)</code>   </td><td class="markdownTableBodyLeft"><code>"(*char; int)-&gt;int"</code>   </td><td class="markdownTableBodyLeft"><code>printf(const char*, ...)</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><b>Named Type</b>   </td><td class="markdownTableBodyLeft"><code>@Name</code> or <code>@NS::Name</code>   </td><td class="markdownTableBodyLeft"><code>"@Point"</code>, <code>"@UI::User"</code>   </td><td class="markdownTableBodyLeft"><code>typedef struct <a class="el" href="structPoint.html" title="A simple struct with two doubles (16 bytes).">Point</a> {...}</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><b>Named Argument</b>   </td><td class="markdownTableBodyLeft"><code>&lt;name&gt;:&lt;type&gt;</code>   </td><td class="markdownTableBodyLeft"><code>"(count:int, data:*void)"</code>   </td><td class="markdownTableBodyLeft">(For reflection only)   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md193"></a>
2.3 Syntax Showcase</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">FFI Signature   </th><th class="markdownTableHeadLeft">Breakdown    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>int</code>   </td><td class="markdownTableBodyLeft">A standard C signed integer.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>*char</code>   </td><td class="markdownTableBodyLeft">A pointer to a C <code>signed char</code>.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>**void</code>   </td><td class="markdownTableBodyLeft">A pointer to a generic <code>void</code> pointer.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>[16:char]</code>   </td><td class="markdownTableBodyLeft">An array of 16 signed characters.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>*[16:char]</code>   </td><td class="markdownTableBodyLeft">A pointer to an array of 16 signed characters.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>{int, float}</code>   </td><td class="markdownTableBodyLeft">An anonymous struct containing an <code>int</code> followed by a <code>float</code>.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>{id:uint64, score:double}</code>   </td><td class="markdownTableBodyLeft">An anonymous struct with two named fields for introspection.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>!{id:uint16, status:char}</code>   </td><td class="markdownTableBodyLeft">A packed struct (1-byte alignment). <code>status</code> will be at offset 2.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>!4:{a:char, b:longlong}</code>   </td><td class="markdownTableBodyLeft">A packed struct with 4-byte alignment. <code>b</code> will be padded to start at offset 4.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>&lt;int, float64&gt;</code>   </td><td class="markdownTableBodyLeft">An anonymous union that can hold either an <code>int</code> or a 64-bit float.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>() -&gt; void</code>   </td><td class="markdownTableBodyLeft">A function that takes no arguments and returns nothing.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>(*char, int) -&gt; int</code>   </td><td class="markdownTableBodyLeft">A function that takes a <code>*char</code> and an <code>int</code>, and returns an <code>int</code>.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>(*char; int, double) -&gt; int</code>   </td><td class="markdownTableBodyLeft">A variadic function like <code>printf</code>. The semicolon <code>;</code> marks the variadic part.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>*((int, int) -&gt; int)</code>   </td><td class="markdownTableBodyLeft">A pointer to a function that takes two <code>int</code>s and returns an <code>int</code>.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>{@<a class="el" href="structPoint.html" title="A simple struct with two doubles (16 bytes).">Point</a>, callback:*((int)-&gt;void)}</code>   </td><td class="markdownTableBodyLeft">A struct with a named type <code>@<a class="el" href="structPoint.html" title="A simple struct with two doubles (16 bytes).">Point</a></code> and a function pointer field.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>c[float]</code>   </td><td class="markdownTableBodyLeft">A C <code>float _Complex</code> number.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>v[4:float]</code>   </td><td class="markdownTableBodyLeft">A 128-bit SIMD vector containing four 32-bit floats.   </td></tr>
</table>
<hr  />
<h1><a class="anchor" id="autotoc_md195"></a>
Part 3: The Named Type Registry</h1>
<p>The registry is the key to managing complexity in large FFI projects. It provides a central, reusable, and readable way to define and use structs, unions, and type aliases.</p>
<h2><a class="anchor" id="autotoc_md196"></a>
Defining Types (&lt;tt&gt;infix_register_types&lt;/tt&gt;)</h2>
<p>You populate a registry by passing a string of semicolon-separated definitions. The parser is robust and handles forward declarations and out-of-order definitions automatically.</p>
<p><b>Syntax:</b> <code>@TypeName = &lt;TypeDefinition&gt;;</code></p>
<div class="fragment"><div class="line"><a class="code hl_struct" href="structinfix__registry__t.html">infix_registry_t</a>* registry = <a class="code hl_function" href="group__registry__api.html#gac808273483db7a9db2bc275c41b13296">infix_registry_create</a>();</div>
<div class="line"> </div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span>* my_types =</div>
<div class="line">    <span class="comment">// Create readable aliases for primitives.</span></div>
<div class="line">    <span class="stringliteral">&quot;@UserID = uint64;&quot;</span></div>
<div class="line">    <span class="stringliteral">&quot;@CallbackFunc = (int)-&gt;void;&quot;</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Define a struct using an alias.</span></div>
<div class="line">    <span class="stringliteral">&quot;@User = { id: @UserID, name: *char };&quot;</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Define a recursive linked-list node.</span></div>
<div class="line">    <span class="stringliteral">&quot;@Node = { value: int, next: *@Node };&quot;</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Define mutually recursive types using forward declarations.</span></div>
<div class="line">    <span class="stringliteral">&quot;@A;&quot;</span></div>
<div class="line">    <span class="stringliteral">&quot;@B;&quot;</span></div>
<div class="line">    <span class="stringliteral">&quot;@A = { b_ptr: *@B };&quot;</span></div>
<div class="line">    <span class="stringliteral">&quot;@B = { a_ptr: *@A };&quot;</span></div>
<div class="line">;</div>
<div class="line"> </div>
<div class="line"><a class="code hl_enumeration" href="group__public__api.html#ga8643667be6ea1ef9269c2e46d8f11ff7">infix_status</a> <a class="code hl_variable" href="103__unions_8c.html#a433468dce2d10c4f34424732ef15ebdd">status</a> = <a class="code hl_function" href="group__registry__api.html#ga4ece2363948c40fe528826bf65dac280">infix_register_types</a>(registry, my_types);</div>
<div class="ttc" id="a103__unions_8c_html_a433468dce2d10c4f34424732ef15ebdd"><div class="ttname"><a href="103__unions_8c.html#a433468dce2d10c4f34424732ef15ebdd">status</a></div><div class="ttdeci">infix_status status</div><div class="ttdef"><b>Definition</b> 103_unions.c:74</div></div>
<div class="ttc" id="agroup__public__api_html_ga8643667be6ea1ef9269c2e46d8f11ff7"><div class="ttname"><a href="group__public__api.html#ga8643667be6ea1ef9269c2e46d8f11ff7">infix_status</a></div><div class="ttdeci">infix_status</div><div class="ttdoc">An enumeration of all possible success or failure codes from the public API.</div><div class="ttdef"><b>Definition</b> infix.h:340</div></div>
<div class="ttc" id="agroup__registry__api_html_ga4ece2363948c40fe528826bf65dac280"><div class="ttname"><a href="group__registry__api.html#ga4ece2363948c40fe528826bf65dac280">infix_register_types</a></div><div class="ttdeci">c23_nodiscard infix_status infix_register_types(infix_registry_t *, const char *)</div><div class="ttdoc">Parses a string of definitions and populates a type registry.</div><div class="ttdef"><b>Definition</b> type_registry.c:233</div></div>
<div class="ttc" id="agroup__registry__api_html_gac808273483db7a9db2bc275c41b13296"><div class="ttname"><a href="group__registry__api.html#gac808273483db7a9db2bc275c41b13296">infix_registry_create</a></div><div class="ttdeci">c23_nodiscard infix_registry_t * infix_registry_create(void)</div><div class="ttdoc">Creates a new, empty type registry.</div><div class="ttdef"><b>Definition</b> type_registry.c:131</div></div>
<div class="ttc" id="astructinfix__registry__t_html"><div class="ttname"><a href="structinfix__registry__t.html">infix_registry_t</a></div><div class="ttdef"><b>Definition</b> infix_internals.h:157</div></div>
</div><!-- fragment --><p><b>Rule:</b> Redefining a type that already exists in a registry is an error. Once a name is defined, it is immutable for the lifetime of the registry.</p>
<h2><a class="anchor" id="autotoc_md197"></a>
Using Named Types</h2>
<p>Once registered, you can use named types in any signature string by passing the registry handle to the FFI creation function.</p>
<div class="fragment"><div class="line"><span class="comment">// Using the registry from the example above:</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span>* signature = <span class="stringliteral">&quot;(*@User, @CallbackFunc) -&gt; void&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><a class="code hl_struct" href="structinfix__forward__t.html">infix_forward_t</a>* trampoline = NULL;</div>
<div class="line"><a class="code hl_function" href="group__high__level__api.html#ga5362b6f6976298aebefdb2a487e72e36">infix_forward_create</a>(&amp;trampoline, signature, my_func, registry);</div>
<div class="ttc" id="agroup__high__level__api_html_ga5362b6f6976298aebefdb2a487e72e36"><div class="ttname"><a href="group__high__level__api.html#ga5362b6f6976298aebefdb2a487e72e36">infix_forward_create</a></div><div class="ttdeci">c23_nodiscard infix_status infix_forward_create(infix_forward_t **, const char *, void *, infix_registry_t *)</div><div class="ttdoc">Generates a bound forward-call trampoline from a signature string.</div><div class="ttdef"><b>Definition</b> signature.c:1202</div></div>
<div class="ttc" id="astructinfix__forward__t_html"><div class="ttname"><a href="structinfix__forward__t.html">infix_forward_t</a></div><div class="ttdef"><b>Definition</b> infix_internals.h:72</div></div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md199"></a>
Part 4: Technical Specification</h1>
<h3><a class="anchor" id="autotoc_md200"></a>
4.1 Whitespace and Comments</h3>
<p>Insignificant whitespace (spaces, tabs, newlines) is permitted between any two tokens and should be ignored. Comments begin with a hash symbol (<code>#</code>) and continue to the end of the line.</p>
<h3><a class="anchor" id="autotoc_md201"></a>
4.2 EBNF Grammar</h3>
<p>This Extended Backus-Naur Form grammar formally defines the signature format.</p>
<div class="fragment"><div class="line">signature           ::= function_type | value_type</div>
<div class="line">value_type          ::= pointer_type | array_type | aggregate_type | enum_type | complex_type | vector_type | primitive_type | grouped_type | named_type_ref</div>
<div class="line"> </div>
<div class="line">pointer_type        ::= &#39;*&#39; value_type</div>
<div class="line">array_type          ::= &#39;[&#39; Integer &#39;:&#39; value_type &#39;]&#39;</div>
<div class="line">grouped_type        ::= &#39;(&#39; value_type &#39;)&#39;</div>
<div class="line"> </div>
<div class="line">aggregate_type      ::= struct_type | union_type | packed_struct_type</div>
<div class="line">struct_type         ::= &#39;{&#39; member_list? &#39;}&#39;</div>
<div class="line">packed_struct_type  ::= &#39;!&#39; ( Integer &#39;:&#39; )? &#39;{&#39; member_list? &#39;}&#39;</div>
<div class="line">union_type          ::= &#39;&lt;&#39; member_list? &#39;&gt;&#39;</div>
<div class="line">member_list         ::= member ( &#39;,&#39; member )*</div>
<div class="line">member              ::= ( Identifier &#39;:&#39; )? value_type</div>
<div class="line"> </div>
<div class="line">enum_type           ::= &#39;e&#39; &#39;:&#39; primitive_type</div>
<div class="line">complex_type        ::= &#39;c&#39; &#39;[&#39; value_type &#39;]&#39;</div>
<div class="line">vector_type         ::= &#39;v&#39; &#39;[&#39; Integer &#39;:&#39; value_type &#39;]&#39;</div>
<div class="line">named_type_ref      ::= &#39;@&#39; Identifier</div>
<div class="line"> </div>
<div class="line">function_type       ::= &#39;(&#39; arg_list? &#39;)&#39; &#39;-&gt;&#39; value_type</div>
<div class="line">arg_list            ::= fixed_args ( &#39;;&#39; variadic_args )? | (&#39;;&#39;)? variadic_args</div>
<div class="line">fixed_args          ::= arg ( &#39;,&#39; arg )*</div>
<div class="line">variadic_args       ::= arg ( &#39;,&#39; arg )*</div>
<div class="line">arg                 ::= ( Identifier &#39;:&#39; )? value_type</div>
<div class="line"> </div>
<div class="line">primitive_type      ::= &#39;void&#39; | &#39;bool&#39;</div>
<div class="line">                    | &#39;char&#39; | &#39;uchar&#39; | &#39;short&#39; | &#39;ushort&#39; | &#39;int&#39; | &#39;uint&#39;</div>
<div class="line">                    | &#39;long&#39; | &#39;ulong&#39; | &#39;longlong&#39; | &#39;ulonglong&#39;</div>
<div class="line">                    | &#39;float&#39; | &#39;double&#39; | &#39;longdouble&#39;</div>
<div class="line">                    | &#39;sint8&#39; | &#39;uint8&#39; | &#39;sint16&#39; | &#39;uint16&#39; | &#39;sint32&#39; | &#39;uint32&#39;</div>
<div class="line">                    | &#39;sint64&#39; | &#39;uint64&#39; | &#39;sint128&#39; | &#39;uint128&#39;</div>
<div class="line">                    | &#39;float32&#39; | &#39;float64&#39;</div>
<div class="line"> </div>
<div class="line">Identifier          ::= ([a-zA-Z_] [a-zA-Z0-9_]*) ( &#39;::&#39; [a-zA-Z_] [a-zA-Z0-9_]* )*</div>
<div class="line">Integer             ::= [0-9]+</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md202"></a>
4.3 Design Rationale: Why This Syntax?</h3>
<ol type="1">
<li><b>Readability over Brevity:</b> The two-tier type system (<code>int</code> vs. <code>int32</code>) directly maps to developer intent ("portability" vs. "specific layout").</li>
<li><b>Unambiguous Grammar:</b> Using a pure prefix for pointers (<code>*</code>) and clear delimiters for all other composites (<code>[]</code>, <code>{}</code>, <code>&lt;&gt;</code>) eliminates ambiguity and allows for simple, linear parsing.</li>
<li><b>Consistency:</b> The <code>c[...]</code> and <code>v[...]</code> syntax for complex and vector types creates a consistent "family" of specialized numeric constructors.</li>
</ol>
<h3><a class="anchor" id="autotoc_md203"></a>
4.4 Comparison with Other Systems</h3>
<ul>
<li><b>vs. Itanium C++ ABI:</b> Itanium is a "write-only" format designed for linkers. <code>infix</code> signatures are designed for humans to read and write.</li>
<li><b>vs. Python's <code>ctypes</code>:</b> <code>ctypes</code> uses a programmatic, object-oriented approach. The <code>infix</code> format is a standalone, declarative string that can be used by <em>any</em> language.</li>
<li><b>vs. <code>dyncall</code>'s Signature Format:</b> <code>dyncall</code>'s format is a flat string of single characters (e.g., <code>isL)d</code>), prioritizing brevity. <code>infix</code> prioritizes human readability (<code>(int, ushort, longlong) -&gt; double</code>). Further, <code>dyncall</code> can only describe primitive types, whereas <code>infix</code> treats complex data structures as first-class citizens. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
