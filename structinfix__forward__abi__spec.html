<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>infix: infix_forward_abi_spec Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript"> DoxygenAwesomeDarkModeToggle.init() </script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript"> DoxygenAwesomeFragmentCopyButton.init() </script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript"> DoxygenAwesomeParagraphLink.init() </script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript"> DoxygenAwesomeInteractiveToc.init() </script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">infix
   </div>
   <div id="projectbrief">A JIT-Powered FFI Library for C</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('structinfix__forward__abi__spec.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="structinfix__forward__abi__spec-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">infix_forward_abi_spec Struct Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Defines the ABI-specific implementation interface for forward trampolines.  
 <a href="structinfix__forward__abi__spec.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="infix__internals_8h_source.html">infix_internals.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:abc3ba94bc101197461a5faf77abe9762" id="r_abc3ba94bc101197461a5faf77abe9762"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__high__level__api.html#ga8643667be6ea1ef9269c2e46d8f11ff7">infix_status</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structinfix__forward__abi__spec.html#abc3ba94bc101197461a5faf77abe9762">prepare_forward_call_frame</a> )(<a class="el" href="structinfix__arena__t.html">infix_arena_t</a> *<a class="el" href="005__layouts_8c.html#afb7c3f5e091eb15b03c0a427c1a3ad1e">arena</a>, <a class="el" href="structinfix__call__frame__layout.html">infix_call_frame_layout</a> **out_layout, <a class="el" href="group__type__system.html#ga0ab49e30398b3c31b723e8b82bf16029">infix_type</a> *<a class="el" href="901__call__overhead_8c.html#a5f79aa6bd01b66791b7e5ee78dea11aa">ret_type</a>, <a class="el" href="group__type__system.html#ga0ab49e30398b3c31b723e8b82bf16029">infix_type</a> **<a class="el" href="901__call__overhead_8c.html#a5ee7905532888ac403e1bf46e306b3ce">arg_types</a>, size_t num_args, size_t num_fixed_args, void *target_fn)</td></tr>
<tr class="memdesc:abc3ba94bc101197461a5faf77abe9762"><td class="mdescLeft">&#160;</td><td class="mdescRight">Analyzes a function signature to create a complete call frame layout.  <br /></td></tr>
<tr class="separator:abc3ba94bc101197461a5faf77abe9762"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d7c11c5baeed348de066a3f6768492b" id="r_a1d7c11c5baeed348de066a3f6768492b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__high__level__api.html#ga8643667be6ea1ef9269c2e46d8f11ff7">infix_status</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structinfix__forward__abi__spec.html#a1d7c11c5baeed348de066a3f6768492b">generate_forward_prologue</a> )(<a class="el" href="structcode__buffer.html">code_buffer</a> *buf, <a class="el" href="structinfix__call__frame__layout.html">infix_call_frame_layout</a> *layout)</td></tr>
<tr class="memdesc:a1d7c11c5baeed348de066a3f6768492b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates the function prologue (stack setup, saving registers).  <br /></td></tr>
<tr class="separator:a1d7c11c5baeed348de066a3f6768492b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a759dbe27253a023d9ebf26780fe277f8" id="r_a759dbe27253a023d9ebf26780fe277f8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__high__level__api.html#ga8643667be6ea1ef9269c2e46d8f11ff7">infix_status</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structinfix__forward__abi__spec.html#a759dbe27253a023d9ebf26780fe277f8">generate_forward_argument_moves</a> )(<a class="el" href="structcode__buffer.html">code_buffer</a> *buf, <a class="el" href="structinfix__call__frame__layout.html">infix_call_frame_layout</a> *layout, <a class="el" href="group__type__system.html#ga0ab49e30398b3c31b723e8b82bf16029">infix_type</a> **<a class="el" href="901__call__overhead_8c.html#a5ee7905532888ac403e1bf46e306b3ce">arg_types</a>, size_t num_args, size_t num_fixed_args)</td></tr>
<tr class="memdesc:a759dbe27253a023d9ebf26780fe277f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates code to move arguments from the <code>void**</code> array into registers and/or the stack.  <br /></td></tr>
<tr class="separator:a759dbe27253a023d9ebf26780fe277f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98973dc40a884585391b79278d6ca8bc" id="r_a98973dc40a884585391b79278d6ca8bc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__high__level__api.html#ga8643667be6ea1ef9269c2e46d8f11ff7">infix_status</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structinfix__forward__abi__spec.html#a98973dc40a884585391b79278d6ca8bc">generate_forward_call_instruction</a> )(<a class="el" href="structcode__buffer.html">code_buffer</a> *buf, <a class="el" href="structinfix__call__frame__layout.html">infix_call_frame_layout</a> *layout)</td></tr>
<tr class="memdesc:a98973dc40a884585391b79278d6ca8bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates the <code>call</code> instruction to the target function.  <br /></td></tr>
<tr class="separator:a98973dc40a884585391b79278d6ca8bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accb37813f9a68f9df1e8989f469cda6c" id="r_accb37813f9a68f9df1e8989f469cda6c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__high__level__api.html#ga8643667be6ea1ef9269c2e46d8f11ff7">infix_status</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structinfix__forward__abi__spec.html#accb37813f9a68f9df1e8989f469cda6c">generate_forward_epilogue</a> )(<a class="el" href="structcode__buffer.html">code_buffer</a> *buf, <a class="el" href="structinfix__call__frame__layout.html">infix_call_frame_layout</a> *layout, <a class="el" href="group__type__system.html#ga0ab49e30398b3c31b723e8b82bf16029">infix_type</a> *<a class="el" href="901__call__overhead_8c.html#a5f79aa6bd01b66791b7e5ee78dea11aa">ret_type</a>)</td></tr>
<tr class="memdesc:accb37813f9a68f9df1e8989f469cda6c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates the function epilogue (handling return value, restoring stack, returning).  <br /></td></tr>
<tr class="separator:accb37813f9a68f9df1e8989f469cda6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Defines the ABI-specific implementation interface for forward trampolines. </p>
<p>This structure is a virtual function table (v-table) that decouples the platform-agnostic JIT engine (<code><a class="el" href="trampoline_8c.html" title="The core JIT engine for generating forward and reverse trampolines.">trampoline.c</a></code>) from the platform-specific code generation logic (<code>arch/...</code>). Each supported ABI (e.g., SysV x64, Win x64, AArch64) provides a concrete implementation of this interface.</p>
<p>The JIT pipeline for a forward call proceeds in a well-defined order:</p><ol type="1">
<li><code>prepare_forward_call_frame</code> is called first to analyze the function signature and produce a complete <code><a class="el" href="structinfix__call__frame__layout.html" title="A complete layout blueprint for a forward call frame.">infix_call_frame_layout</a></code> blueprint.</li>
<li>The <code>generate_*</code> functions are then called in sequence, consuming the layout blueprint to emit the corresponding machine code into a <code><a class="el" href="structcode__buffer.html" title="A dynamic buffer for staged machine code generation.">code_buffer</a></code>. </li>
</ol>
</div><h2 class="groupheader">Member Data Documentation</h2>
<a id="a759dbe27253a023d9ebf26780fe277f8" name="a759dbe27253a023d9ebf26780fe277f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a759dbe27253a023d9ebf26780fe277f8">&#9670;&#160;</a></span>generate_forward_argument_moves</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__high__level__api.html#ga8643667be6ea1ef9269c2e46d8f11ff7">infix_status</a>(* infix_forward_abi_spec::generate_forward_argument_moves) (<a class="el" href="structcode__buffer.html">code_buffer</a> *buf, <a class="el" href="structinfix__call__frame__layout.html">infix_call_frame_layout</a> *layout, <a class="el" href="group__type__system.html#ga0ab49e30398b3c31b723e8b82bf16029">infix_type</a> **<a class="el" href="901__call__overhead_8c.html#a5ee7905532888ac403e1bf46e306b3ce">arg_types</a>, size_t num_args, size_t num_fixed_args)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generates code to move arguments from the <code>void**</code> array into registers and/or the stack. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">buf</td><td>The code buffer. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">layout</td><td>The layout blueprint. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">arg_types</td><td>The array of argument types. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">num_args</td><td>Total number of arguments. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">num_fixed_args</td><td><a class="el" href="unionNumber.html" title="A simple union to test aggregate classification.">Number</a> of fixed arguments. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>INFIX_SUCCESS</code> on success. </dd></dl>

</div>
</div>
<a id="a98973dc40a884585391b79278d6ca8bc" name="a98973dc40a884585391b79278d6ca8bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98973dc40a884585391b79278d6ca8bc">&#9670;&#160;</a></span>generate_forward_call_instruction</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__high__level__api.html#ga8643667be6ea1ef9269c2e46d8f11ff7">infix_status</a>(* infix_forward_abi_spec::generate_forward_call_instruction) (<a class="el" href="structcode__buffer.html">code_buffer</a> *buf, <a class="el" href="structinfix__call__frame__layout.html">infix_call_frame_layout</a> *layout)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generates the <code>call</code> instruction to the target function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">buf</td><td>The code buffer. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">layout</td><td>The layout blueprint. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>INFIX_SUCCESS</code> on success. </dd></dl>

</div>
</div>
<a id="accb37813f9a68f9df1e8989f469cda6c" name="accb37813f9a68f9df1e8989f469cda6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#accb37813f9a68f9df1e8989f469cda6c">&#9670;&#160;</a></span>generate_forward_epilogue</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__high__level__api.html#ga8643667be6ea1ef9269c2e46d8f11ff7">infix_status</a>(* infix_forward_abi_spec::generate_forward_epilogue) (<a class="el" href="structcode__buffer.html">code_buffer</a> *buf, <a class="el" href="structinfix__call__frame__layout.html">infix_call_frame_layout</a> *layout, <a class="el" href="group__type__system.html#ga0ab49e30398b3c31b723e8b82bf16029">infix_type</a> *<a class="el" href="901__call__overhead_8c.html#a5f79aa6bd01b66791b7e5ee78dea11aa">ret_type</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generates the function epilogue (handling return value, restoring stack, returning). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">buf</td><td>The code buffer. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">layout</td><td>The layout blueprint. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ret_type</td><td>The function's return type. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>INFIX_SUCCESS</code> on success. </dd></dl>

</div>
</div>
<a id="a1d7c11c5baeed348de066a3f6768492b" name="a1d7c11c5baeed348de066a3f6768492b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d7c11c5baeed348de066a3f6768492b">&#9670;&#160;</a></span>generate_forward_prologue</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__high__level__api.html#ga8643667be6ea1ef9269c2e46d8f11ff7">infix_status</a>(* infix_forward_abi_spec::generate_forward_prologue) (<a class="el" href="structcode__buffer.html">code_buffer</a> *buf, <a class="el" href="structinfix__call__frame__layout.html">infix_call_frame_layout</a> *layout)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generates the function prologue (stack setup, saving registers). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">buf</td><td>The code buffer to append machine code to. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">layout</td><td>The layout blueprint from the previous step. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>INFIX_SUCCESS</code> on success. </dd></dl>

</div>
</div>
<a id="abc3ba94bc101197461a5faf77abe9762" name="abc3ba94bc101197461a5faf77abe9762"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc3ba94bc101197461a5faf77abe9762">&#9670;&#160;</a></span>prepare_forward_call_frame</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__high__level__api.html#ga8643667be6ea1ef9269c2e46d8f11ff7">infix_status</a>(* infix_forward_abi_spec::prepare_forward_call_frame) (<a class="el" href="structinfix__arena__t.html">infix_arena_t</a> *<a class="el" href="005__layouts_8c.html#afb7c3f5e091eb15b03c0a427c1a3ad1e">arena</a>, <a class="el" href="structinfix__call__frame__layout.html">infix_call_frame_layout</a> **out_layout, <a class="el" href="group__type__system.html#ga0ab49e30398b3c31b723e8b82bf16029">infix_type</a> *<a class="el" href="901__call__overhead_8c.html#a5f79aa6bd01b66791b7e5ee78dea11aa">ret_type</a>, <a class="el" href="group__type__system.html#ga0ab49e30398b3c31b723e8b82bf16029">infix_type</a> **<a class="el" href="901__call__overhead_8c.html#a5ee7905532888ac403e1bf46e306b3ce">arg_types</a>, size_t num_args, size_t num_fixed_args, void *target_fn)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Analyzes a function signature to create a complete call frame layout. </p>
<p>This is the "classification" stage. It determines where each argument and the return value will be placed (in which registers or on what stack offset) according to the target ABI's rules. The resulting layout is a complete plan for the code emitters. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">arena</td><td>A temporary arena for allocating the layout struct. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">out_layout</td><td>Receives the newly created layout blueprint. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ret_type</td><td>The function's return type. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">arg_types</td><td>Array of argument types. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">num_args</td><td>Total number of arguments. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">num_fixed_args</td><td><a class="el" href="unionNumber.html" title="A simple union to test aggregate classification.">Number</a> of non-variadic arguments. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">target_fn</td><td>The target function address. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>INFIX_SUCCESS</code> on success. </dd></dl>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>src/common/<a class="el" href="infix__internals_8h_source.html">infix_internals.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="structinfix__forward__abi__spec.html">infix_forward_abi_spec</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
