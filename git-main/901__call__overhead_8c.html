<!-- HTML header for doxygen 1.10.0-->
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
  <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=11" />
  <meta name="generator" content="Doxygen 1.10.0" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>infix: /home/runner/work/infix/infix/t/901_call_overhead.c File Reference</title>
  <link href="tabs.css" rel="stylesheet" type="text/css" />
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <script type="text/javascript" src="clipboard.js"></script>
  <script type="text/javascript" src="cookie.js"></script>
  <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <script type="text/javascript" src="version_selector_handler.js"></script>
</head>
<body>
    <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
      <div id="titlearea">
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr id="projectrow">
              <td id="projectalign">
                <div id="projectname">infix
                  <span id="projectnumber"/>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <!-- end header part --><!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_75a01b229474ab4722425a88156bb54e.html">t</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">901_call_overhead.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="classA.html">A</a> microbenchmark to measure the performance overhead of an FFI call.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="double__tap_8h_source.html">common/double_tap.h</a>&quot;</code><br />
<code>#include &lt;<a class="el" href="infix_8h_source.html">infix/infix.h</a>&gt;</code><br />
<code>#include &lt;time.h&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aed3344f1605a3876df2f8bb77557f8b3" id="r_aed3344f1605a3876df2f8bb77557f8b3"><td class="memItemLeft" align="right" valign="top"><a id="aed3344f1605a3876df2f8bb77557f8b3" name="aed3344f1605a3876df2f8bb77557f8b3"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>add_for_benchmark</b> (int a, int b)</td></tr>
<tr class="separator:aed3344f1605a3876df2f8bb77557f8b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a520d0c5dc66f4dfb250512b27b553008" id="r_a520d0c5dc66f4dfb250512b27b553008"><td class="memItemLeft" align="right" valign="top"><a id="a520d0c5dc66f4dfb250512b27b553008" name="a520d0c5dc66f4dfb250512b27b553008"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>diag</b> (&quot;Infix Call Overhead Benchmark&quot;)</td></tr>
<tr class="separator:a520d0c5dc66f4dfb250512b27b553008"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a995b400f1978d4445954d1990dd1bee5" id="r_a995b400f1978d4445954d1990dd1bee5"><td class="memItemLeft" align="right" valign="top"><a id="a995b400f1978d4445954d1990dd1bee5" name="a995b400f1978d4445954d1990dd1bee5"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>diag</b> (&quot;Iterations: %d&quot;, BENCHMARK_ITERATIONS)</td></tr>
<tr class="separator:a995b400f1978d4445954d1990dd1bee5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4da1cc2248db526f16cd6a2731281fb" id="r_ad4da1cc2248db526f16cd6a2731281fb"><td class="memItemLeft" align="right" valign="top"><a id="ad4da1cc2248db526f16cd6a2731281fb" name="ad4da1cc2248db526f16cd6a2731281fb"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>diag</b> (&quot;Target function: int(int, int)&quot;)</td></tr>
<tr class="separator:ad4da1cc2248db526f16cd6a2731281fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77168d3709d668c5c1836a8280cfdb5a" id="r_a77168d3709d668c5c1836a8280cfdb5a"><td class="memItemLeft" align="right" valign="top"><a id="a77168d3709d668c5c1836a8280cfdb5a" name="a77168d3709d668c5c1836a8280cfdb5a"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>for</b> (int i=0;i&lt; BENCHMARK_ITERATIONS;++i)</td></tr>
<tr class="separator:a77168d3709d668c5c1836a8280cfdb5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a94952f2ada02faaf8fe8571b069622" id="r_a8a94952f2ada02faaf8fe8571b069622"><td class="memItemLeft" align="right" valign="top"><a id="a8a94952f2ada02faaf8fe8571b069622" name="a8a94952f2ada02faaf8fe8571b069622"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>diag</b> (&quot;Direct Call Time: %.4f s (%.2f ns/call)&quot;, direct_time, direct_ns_per_call)</td></tr>
<tr class="separator:a8a94952f2ada02faaf8fe8571b069622"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25ec5bf2371dba8ff1cdb1cb6d499dbd" id="r_a25ec5bf2371dba8ff1cdb1cb6d499dbd"><td class="memItemLeft" align="right" valign="top"><a id="a25ec5bf2371dba8ff1cdb1cb6d499dbd" name="a25ec5bf2371dba8ff1cdb1cb6d499dbd"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>if</b> (<a class="el" href="group__manual__api.html#gaa265f727b644889b3a6e0817532bfe6a">infix_forward_create_unbound_manual</a> &amp;,,, 2, 2arg_types !=<a class="el" href="group__public__api.html#gga8643667be6ea1ef9269c2e46d8f11ff7ae50c34a24362f9364b4b20ef29d259da">INFIX_SUCCESS</a>)</td></tr>
<tr class="separator:a25ec5bf2371dba8ff1cdb1cb6d499dbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4069e3c9baaa2e23160001053f7ec5f4" id="r_a4069e3c9baaa2e23160001053f7ec5f4"><td class="memItemLeft" align="right" valign="top"><a id="a4069e3c9baaa2e23160001053f7ec5f4" name="a4069e3c9baaa2e23160001053f7ec5f4"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>diag</b> (&quot;infix (Unbound):    %.4f s (%.2f ns/call) -&gt; Overhead: ~%.2f ns&quot;, unbound_time, unbound_ns, unbound_ns - direct_ns_per_call)</td></tr>
<tr class="separator:a4069e3c9baaa2e23160001053f7ec5f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad36da003b2b775d02bc4b5e57d3a2332" id="r_ad36da003b2b775d02bc4b5e57d3a2332"><td class="memItemLeft" align="right" valign="top"><a id="ad36da003b2b775d02bc4b5e57d3a2332" name="ad36da003b2b775d02bc4b5e57d3a2332"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>if</b> (<a class="el" href="group__manual__api.html#ga017f14762b217bc6d0101e994481bfd0">infix_forward_create_manual</a>(&amp;bound_t, ret_type, arg_types, 2, 2,(void *) add_for_benchmark) !=<a class="el" href="group__public__api.html#gga8643667be6ea1ef9269c2e46d8f11ff7ae50c34a24362f9364b4b20ef29d259da">INFIX_SUCCESS</a>) bail_out(&quot;Failed to create bound trampoline&quot;)</td></tr>
<tr class="separator:ad36da003b2b775d02bc4b5e57d3a2332"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30d28852aed20dadb7729ee5835b9d99" id="r_a30d28852aed20dadb7729ee5835b9d99"><td class="memItemLeft" align="right" valign="top"><a id="a30d28852aed20dadb7729ee5835b9d99" name="a30d28852aed20dadb7729ee5835b9d99"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>diag</b> (&quot;infix (Bound):      %.4f s (%.2f ns/call) -&gt; Overhead: ~%.2f ns&quot;, bound_time, bound_ns, bound_ns - direct_ns_per_call)</td></tr>
<tr class="separator:a30d28852aed20dadb7729ee5835b9d99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a135e615d18daec14ebf61bed5869abf1" id="r_a135e615d18daec14ebf61bed5869abf1"><td class="memItemLeft" align="right" valign="top"><a id="a135e615d18daec14ebf61bed5869abf1" name="a135e615d18daec14ebf61bed5869abf1"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>infix_forward_destroy</b> (unbound_t)</td></tr>
<tr class="separator:a135e615d18daec14ebf61bed5869abf1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f0139eb891f44c7b12e3dd3d383acfe" id="r_a9f0139eb891f44c7b12e3dd3d383acfe"><td class="memItemLeft" align="right" valign="top"><a id="a9f0139eb891f44c7b12e3dd3d383acfe" name="a9f0139eb891f44c7b12e3dd3d383acfe"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>infix_forward_destroy</b> (bound_t)</td></tr>
<tr class="separator:a9f0139eb891f44c7b12e3dd3d383acfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fdc4d0e57bebf474e34348ed3ed74c3" id="r_a7fdc4d0e57bebf474e34348ed3ed74c3"><td class="memItemLeft" align="right" valign="top"><a id="a7fdc4d0e57bebf474e34348ed3ed74c3" name="a7fdc4d0e57bebf474e34348ed3ed74c3"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>note</b> (&quot;dyncall benchmarking was not enabled.&quot;)</td></tr>
<tr class="separator:a7fdc4d0e57bebf474e34348ed3ed74c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9627af862f20e92b7f9b56ed4edb8026" id="r_a9627af862f20e92b7f9b56ed4edb8026"><td class="memItemLeft" align="right" valign="top"><a id="a9627af862f20e92b7f9b56ed4edb8026" name="a9627af862f20e92b7f9b56ed4edb8026"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>pass</b> (&quot;Benchmark completed (final accumulator value: %d)&quot;, accumulator)</td></tr>
<tr class="separator:a9627af862f20e92b7f9b56ed4edb8026"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a67c1cbb549407d754fe1894f74b40c3e" id="r_a67c1cbb549407d754fe1894f74b40c3e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a67c1cbb549407d754fe1894f74b40c3e">TEST</a></td></tr>
<tr class="separator:a67c1cbb549407d754fe1894f74b40c3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6c3dee962ab60df2dbf530cf8d68cb8" id="r_ae6c3dee962ab60df2dbf530cf8d68cb8"><td class="memItemLeft" align="right" valign="top"><a id="ae6c3dee962ab60df2dbf530cf8d68cb8" name="ae6c3dee962ab60df2dbf530cf8d68cb8"></a>
const int&#160;</td><td class="memItemRight" valign="bottom"><b>BENCHMARK_ITERATIONS</b> = 10000000</td></tr>
<tr class="separator:ae6c3dee962ab60df2dbf530cf8d68cb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03cbb16bdd4a10f4fa29ecfa46c25045" id="r_a03cbb16bdd4a10f4fa29ecfa46c25045"><td class="memItemLeft" align="right" valign="top"><a id="a03cbb16bdd4a10f4fa29ecfa46c25045" name="a03cbb16bdd4a10f4fa29ecfa46c25045"></a>
volatile int&#160;</td><td class="memItemRight" valign="bottom"><b>accumulator</b> = 0</td></tr>
<tr class="separator:a03cbb16bdd4a10f4fa29ecfa46c25045"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a550769bbd4e7537ff90a656f5b0c23b2" id="r_a550769bbd4e7537ff90a656f5b0c23b2"><td class="memItemLeft" align="right" valign="top"><a id="a550769bbd4e7537ff90a656f5b0c23b2" name="a550769bbd4e7537ff90a656f5b0c23b2"></a>
clock_t&#160;</td><td class="memItemRight" valign="bottom"><b>start</b> = clock()</td></tr>
<tr class="separator:a550769bbd4e7537ff90a656f5b0c23b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb358f48b1646c750fb9da6c6585be2b" id="r_afb358f48b1646c750fb9da6c6585be2b"><td class="memItemLeft" align="right" valign="top"><a id="afb358f48b1646c750fb9da6c6585be2b" name="afb358f48b1646c750fb9da6c6585be2b"></a>
clock_t&#160;</td><td class="memItemRight" valign="bottom"><b>end</b> = clock()</td></tr>
<tr class="separator:afb358f48b1646c750fb9da6c6585be2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5c855e93fa3dc5e9c76937de0a08bf7" id="r_ae5c855e93fa3dc5e9c76937de0a08bf7"><td class="memItemLeft" align="right" valign="top"><a id="ae5c855e93fa3dc5e9c76937de0a08bf7" name="ae5c855e93fa3dc5e9c76937de0a08bf7"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>direct_time</b> = ((double)(end - start)) / CLOCKS_PER_SEC</td></tr>
<tr class="separator:ae5c855e93fa3dc5e9c76937de0a08bf7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a165c1c6b8f1e6ca33eb1518edbf3da50" id="r_a165c1c6b8f1e6ca33eb1518edbf3da50"><td class="memItemLeft" align="right" valign="top"><a id="a165c1c6b8f1e6ca33eb1518edbf3da50" name="a165c1c6b8f1e6ca33eb1518edbf3da50"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>direct_ns_per_call</b> = (direct_time / BENCHMARK_ITERATIONS) * 1e9</td></tr>
<tr class="separator:a165c1c6b8f1e6ca33eb1518edbf3da50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f79aa6bd01b66791b7e5ee78dea11aa" id="r_a5f79aa6bd01b66791b7e5ee78dea11aa"><td class="memItemLeft" align="right" valign="top"><a id="a5f79aa6bd01b66791b7e5ee78dea11aa" name="a5f79aa6bd01b66791b7e5ee78dea11aa"></a>
<a class="el" href="group__type__system.html#ga0ab49e30398b3c31b723e8b82bf16029">infix_type</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>ret_type</b> = <a class="el" href="group__type__system.html#gae323d599fbc081976a99a1e3b726a0b8">infix_type_create_primitive</a>(<a class="el" href="group__type__system.html#gga2cd7b00c1f2606249654a8e8b7cbc044a449724cf88949d38538312535be9ce6f">INFIX_PRIMITIVE_SINT32</a>)</td></tr>
<tr class="separator:a5f79aa6bd01b66791b7e5ee78dea11aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ee7905532888ac403e1bf46e306b3ce" id="r_a5ee7905532888ac403e1bf46e306b3ce"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__type__system.html#ga0ab49e30398b3c31b723e8b82bf16029">infix_type</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5ee7905532888ac403e1bf46e306b3ce">arg_types</a> []</td></tr>
<tr class="separator:a5ee7905532888ac403e1bf46e306b3ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a783f3f2953f385e8223af2d3568e4a92" id="r_a783f3f2953f385e8223af2d3568e4a92"><td class="memItemLeft" align="right" valign="top"><a id="a783f3f2953f385e8223af2d3568e4a92" name="a783f3f2953f385e8223af2d3568e4a92"></a>
<a class="el" href="structinfix__forward__t.html">infix_forward_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>unbound_t</b> = nullptr</td></tr>
<tr class="separator:a783f3f2953f385e8223af2d3568e4a92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a583bc4a446d7d34ba26ee2d9c3b70268" id="r_a583bc4a446d7d34ba26ee2d9c3b70268"><td class="memItemLeft" align="right" valign="top"><a id="a583bc4a446d7d34ba26ee2d9c3b70268" name="a583bc4a446d7d34ba26ee2d9c3b70268"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>unbound_time</b> = ((double)(end - start)) / CLOCKS_PER_SEC</td></tr>
<tr class="separator:a583bc4a446d7d34ba26ee2d9c3b70268"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e5cffb4af7f4131c94b742415f779cc" id="r_a4e5cffb4af7f4131c94b742415f779cc"><td class="memItemLeft" align="right" valign="top"><a id="a4e5cffb4af7f4131c94b742415f779cc" name="a4e5cffb4af7f4131c94b742415f779cc"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>unbound_ns</b> = (unbound_time / BENCHMARK_ITERATIONS) * 1e9</td></tr>
<tr class="separator:a4e5cffb4af7f4131c94b742415f779cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a235edff479963a1a75ebc21f02111491" id="r_a235edff479963a1a75ebc21f02111491"><td class="memItemLeft" align="right" valign="top"><a id="a235edff479963a1a75ebc21f02111491" name="a235edff479963a1a75ebc21f02111491"></a>
<a class="el" href="structinfix__forward__t.html">infix_forward_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>bound_t</b> = nullptr</td></tr>
<tr class="separator:a235edff479963a1a75ebc21f02111491"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2798b6d609034611efb3120044fcdd6a" id="r_a2798b6d609034611efb3120044fcdd6a"><td class="memItemLeft" align="right" valign="top"><a id="a2798b6d609034611efb3120044fcdd6a" name="a2798b6d609034611efb3120044fcdd6a"></a>
<a class="el" href="group__public__api.html#gaa424eb35854d3fa968995851e690c9f8">infix_bound_cif_func</a>&#160;</td><td class="memItemRight" valign="bottom"><b>bound_cif</b> = <a class="el" href="group__introspection__api.html#gafe563c6ded8b7937f0a803fbf6938a4b">infix_forward_get_code</a>(bound_t)</td></tr>
<tr class="separator:a2798b6d609034611efb3120044fcdd6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5223524456d9df67af038068758386e" id="r_af5223524456d9df67af038068758386e"><td class="memItemLeft" align="right" valign="top"><a id="af5223524456d9df67af038068758386e" name="af5223524456d9df67af038068758386e"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>bound_time</b> = ((double)(end - start)) / CLOCKS_PER_SEC</td></tr>
<tr class="separator:af5223524456d9df67af038068758386e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c00e10e354a6c5a7759581e3ac956a7" id="r_a8c00e10e354a6c5a7759581e3ac956a7"><td class="memItemLeft" align="right" valign="top"><a id="a8c00e10e354a6c5a7759581e3ac956a7" name="a8c00e10e354a6c5a7759581e3ac956a7"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>bound_ns</b> = (bound_time / BENCHMARK_ITERATIONS) * 1e9</td></tr>
<tr class="separator:a8c00e10e354a6c5a7759581e3ac956a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classA.html">A</a> microbenchmark to measure the performance overhead of an FFI call. </p>
<p>Copyright (c) 2025 Sanko Robinson</p>
<p>This source code is dual-licensed under the Artistic License 2.0 or the MIT License. You may choose to use this code under the terms of either license.</p>
<p>SPDX-License-Identifier: (Artistic-2.0 OR MIT)</p>
<p>The documentation blocks within this file are licensed under the Creative Commons Attribution 4.0 International License (CC BY 4.0).</p>
<p>SPDX-License-Identifier: CC-BY-4.0</p>
<p>This is a non-functional test designed to measure the raw speed of the generated FFI trampolines. It should not be run as part of the standard test suite, but rather invoked explicitly when performance analysis is needed.</p>
<p>The test operates in two phases:</p><ol type="1">
<li><b>Baseline (Direct Call):</b> It measures the time taken to execute millions of direct, native <a class="el" href="classC.html">C</a> function calls to a simple <code>int add(int, int)</code> function. This establishes a baseline performance measurement.</li>
<li><b>FFI Call:</b> It then generates a forward trampoline for the same function and measures the time taken to execute the same number of calls through the FFI.</li>
</ol>
<p>The difference between these two measurements, divided by the number of iterations, gives the average per-call overhead of the trampoline mechanism in nanoseconds. This is a critical metric for performance-sensitive applications.</p>
<p>An optional comparison against the <code>dyncall</code> library can be enabled by defining the <code>DYNCALL_BENCHMARK</code> macro at compile time. </p>
</div><h2 class="groupheader">Variable Documentation</h2>
<a id="a5ee7905532888ac403e1bf46e306b3ce" name="a5ee7905532888ac403e1bf46e306b3ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ee7905532888ac403e1bf46e306b3ce">&#9670;&#160;</a></span>arg_types</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__type__system.html#ga0ab49e30398b3c31b723e8b82bf16029">infix_type</a>* arg_types[]</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {<a class="code hl_function" href="group__type__system.html#gae323d599fbc081976a99a1e3b726a0b8">infix_type_create_primitive</a>(<a class="code hl_enumvalue" href="group__type__system.html#gga2cd7b00c1f2606249654a8e8b7cbc044a449724cf88949d38538312535be9ce6f">INFIX_PRIMITIVE_SINT32</a>),</div>
<div class="line">                                <a class="code hl_function" href="group__type__system.html#gae323d599fbc081976a99a1e3b726a0b8">infix_type_create_primitive</a>(<a class="code hl_enumvalue" href="group__type__system.html#gga2cd7b00c1f2606249654a8e8b7cbc044a449724cf88949d38538312535be9ce6f">INFIX_PRIMITIVE_SINT32</a>)}</div>
<div class="ttc" id="agroup__type__system_html_gae323d599fbc081976a99a1e3b726a0b8"><div class="ttname"><a href="group__type__system.html#gae323d599fbc081976a99a1e3b726a0b8">infix_type_create_primitive</a></div><div class="ttdeci">c23_nodiscard infix_type * infix_type_create_primitive(infix_primitive_type_id)</div><div class="ttdoc">Creates an infix_type descriptor for a primitive C type.</div><div class="ttdef"><b>Definition</b> types.c:102</div></div>
<div class="ttc" id="agroup__type__system_html_gga2cd7b00c1f2606249654a8e8b7cbc044a449724cf88949d38538312535be9ce6f"><div class="ttname"><a href="group__type__system.html#gga2cd7b00c1f2606249654a8e8b7cbc044a449724cf88949d38538312535be9ce6f">INFIX_PRIMITIVE_SINT32</a></div><div class="ttdeci">@ INFIX_PRIMITIVE_SINT32</div><div class="ttdoc">signed int, int32_t</div><div class="ttdef"><b>Definition</b> infix.h:243</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a67c1cbb549407d754fe1894f74b40c3e" name="a67c1cbb549407d754fe1894f74b40c3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67c1cbb549407d754fe1894f74b40c3e">&#9670;&#160;</a></span>TEST</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TEST</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">{</div>
<div class="line">    plan(1)</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
